(function(n){"use strict";Date.now||(Date.now=function(){return(new Date).getTime()});Math.trunc||(Math.trunc=function(n){return n<0?Math.ceil(n):Math.floor(n)});Object.setPrototypeOf||(Object.setPrototypeOf=function(n,t){return n.__proto__=t,n});n.IntelliFactory={Runtime:{Ctor:function(n,t){return n.prototype=t.prototype,n},Class:function(n,t,i){var u=n,f,r,e;if(t){u=new t;for(f in n)u[f]=n[f]}if(r=function(n){if(n)for(var t in n)this[t]=n[t]},r.prototype=u,i)for(e in i)r[e]=i[e];return r},Clone:function(n){var t={};for(var i of Object.getOwnPropertyNames(n))t[i]=n[i];return Object.setPrototypeOf(t,Object.getPrototypeOf(n)),t},NewObject:function(n){for(var i={},t=0;t<n.length;t++)i[n[t][0]]=n[t][1];return i},PrintObject:function(n){var t="{ ",i=!0;for(var r of Object.getOwnPropertyNames(n))i?i=!1:t+=", ",t+=r+" = "+n[r];return t+(i?"}":" }")},DeleteEmptyFields:function(n,t){for(var r,i=0;i<t.length;i++)r=t[i],n[r]===void 0&&delete n[r];return n},GetOptional:function(n){return n===void 0?null:{$:1,$0:n}},SetOptional:function(n,t,i){i?n[t]=i.$0:delete n[t]},SetOrDelete:function(n,t,i){i===void 0?delete n[t]:n[t]=i},Apply:function(n,t,i){return n.apply(t,i)},Bind:function(n){return function(){return n.apply(this,arguments)}},CreateFuncWithArgs:function(n){return function(){return n(Array.prototype.slice.call(arguments))}},CreateFuncWithOnlyThis:function(n){return function(){return n(this)}},CreateFuncWithThis:function(n){return function(){return n(this).apply(null,arguments)}},CreateFuncWithThisArgs:function(n){return function(){return n(this)(Array.prototype.slice.call(arguments))}},CreateFuncWithRest:function(n,t){return function(){return t(Array.prototype.slice.call(arguments,0,n).concat([Array.prototype.slice.call(arguments,n)]))}},CreateFuncWithArgsRest:function(n,t){return function(){return t([Array.prototype.slice.call(arguments,0,n),Array.prototype.slice.call(arguments,n)])}},BindDelegate:function(n,t){var i=n.bind(t);return i.$Func=n,i.$Target=t,i},CreateDelegate:function(n){if(n.length==0)return null;if(n.length==1)return n[0];var t=function(){for(var i,t=0;t<n.length;t++)i=n[t].apply(null,arguments);return i};return t.$Invokes=n,t},CombineDelegates:function(n){for(var t,i=[],r=0;r<n.length;r++)t=n[r],t&&("$Invokes"in t?i=i.concat(t.$Invokes):i.push(t));return IntelliFactory.Runtime.CreateDelegate(i)},DelegateEqual:function(n,t){var f,e,i,r,u;if(n===t)return!0;if(n==null||t==null||(f=n.$Invokes||[n],e=t.$Invokes||[t],f.length!=e.length))return!1;for(i=0;i<f.length;i++)if(r=f[i],u=e[i],!(r===u||"$Func"in r&&"$Func"in u&&r.$Func===u.$Func&&r.$Target==u.$Target))return!1;return!0},ThisFunc:function(n){return function(){var t=Array.prototype.slice.call(arguments);return t.unshift(this),n.apply(null,t)}},ThisFuncOut:function(n){return function(){var t=Array.prototype.slice.call(arguments);return n.apply(t.shift(),t)}},ParamsFunc:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(null,i.slice(0,n).concat([i.slice(n)]))}},ParamsFuncOut:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(null,i.slice(0,n).concat(i[n]))}},ThisParamsFunc:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return i.unshift(this),t.apply(null,i.slice(0,n+1).concat([i.slice(n+1)]))}},ThisParamsFuncOut:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(i.shift(),i.slice(0,n).concat(i[n]))}},Curried:function(n,t,i){return i=i||[],function(r){var u=i.concat([r===void 0?null:r]);return t==1?n.apply(null,u):t==2?function(t){return n.apply(null,u.concat([t===void 0?null:t]))}:IntelliFactory.Runtime.Curried(n,t-1,u)}},Curried2:function(n){return function(t){return function(i){return n(t,i)}}},Curried3:function(n){return function(t){return function(i){return function(r){return n(t,i,r)}}}},UnionByType:function(n,t,i){for(var u,f=typeof t,r=0;r<n.length;r++)if(u=n[r],typeof u=="number"){if(Array.isArray(t)&&(u==0||t.length==u))return{$:r,$0:t}}else if(u==f)return{$:r,$0:t};if(!i)throw new Error("Type not expected for creating Choice value.");},ScriptBasePath:"./",ScriptPath:function(n,t){return this.ScriptBasePath+(this.ScriptSkipAssemblyDir?"":n+"/")+t},OnLoad:function(n){"load"in this||(this.load=[]);this.load.push(n)},Start:function(){function n(n){for(var t=0;t<n.length;t++)n[t]()}"load"in this&&(n(this.load),this.load=[])}}};n.IntelliFactory.Runtime.OnLoad(function(){n.WebSharper&&WebSharper.Activator&&WebSharper.Activator.Activate&&WebSharper.Activator.Activate()});n.ignore=function(){};n.id=function(n){return n};n.fst=function(n){return n[0]};n.snd=function(n){return n[1]};n.trd=function(n){return n[2]};n.console||(n.console={count:ignore,dir:ignore,error:ignore,group:ignore,groupEnd:ignore,info:ignore,log:ignore,profile:ignore,profileEnd:ignore,time:ignore,timeEnd:ignore,trace:ignore,warn:ignore})})(self);
var JSON;JSON||(JSON={}),function(){"use strict";function i(n){return n<10?"0"+n:n}function f(n){return o.lastIndex=0,o.test(n)?'"'+n.replace(o,function(n){var t=s[n];return typeof t=="string"?t:"\\u"+("0000"+n.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+n+'"'}function r(i,e){var s,l,h,a,v=n,c,o=e[i];o&&typeof o=="object"&&typeof o.toJSON=="function"&&(o=o.toJSON(i));typeof t=="function"&&(o=t.call(e,i,o));switch(typeof o){case"string":return f(o);case"number":return isFinite(o)?String(o):"null";case"boolean":case"null":return String(o);case"object":if(!o)return"null";if(n+=u,c=[],Object.prototype.toString.apply(o)==="[object Array]"){for(a=o.length,s=0;s<a;s+=1)c[s]=r(s,o)||"null";return h=c.length===0?"[]":n?"[\n"+n+c.join(",\n"+n)+"\n"+v+"]":"["+c.join(",")+"]",n=v,h}if(t&&typeof t=="object")for(a=t.length,s=0;s<a;s+=1)typeof t[s]=="string"&&(l=t[s],h=r(l,o),h&&c.push(f(l)+(n?": ":":")+h));else for(l in o)Object.prototype.hasOwnProperty.call(o,l)&&(h=r(l,o),h&&c.push(f(l)+(n?": ":":")+h));return h=c.length===0?"{}":n?"{\n"+n+c.join(",\n"+n)+"\n"+v+"}":"{"+c.join(",")+"}",n=v,h}}typeof Date.prototype.toJSON!="function"&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+i(this.getUTCMonth()+1)+"-"+i(this.getUTCDate())+"T"+i(this.getUTCHours())+":"+i(this.getUTCMinutes())+":"+i(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var e=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,o=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,n,u,s={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},t;typeof JSON.stringify!="function"&&(JSON.stringify=function(i,f,e){var o;if(n="",u="",typeof e=="number")for(o=0;o<e;o+=1)u+=" ";else typeof e=="string"&&(u=e);if(t=f,f&&typeof f!="function"&&(typeof f!="object"||typeof f.length!="number"))throw new Error("JSON.stringify");return r("",{"":i})});typeof JSON.parse!="function"&&(JSON.parse=function(n,t){function r(n,i){var f,e,u=n[i];if(u&&typeof u=="object")for(f in u)Object.prototype.hasOwnProperty.call(u,f)&&(e=r(u,f),e!==undefined?u[f]=e:delete u[f]);return t.call(n,i,u)}var i;if(n=String(n),e.lastIndex=0,e.test(n)&&(n=n.replace(e,function(n){return"\\u"+("0000"+n.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(n.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return i=eval("("+n+")"),typeof t=="function"?r({"":i},""):i;throw new SyntaxError("JSON.parse");})}();
/* https://github.com/jonathantneal/closest */
(function(w,p){p=w.Element.prototype
if(!p.matches){p.matches=p.msMatchesSelector||function(s){var m=(this.document||this.ownerDocument).querySelectorAll(s);for(var i=0;m[i]&&m[i]!==e;++i);return!!m[i]}}
if(!p.closest){p.closest=function(s){var e=this;while(e&&e.nodeType==1){if(e.matches(s))return e;e=e.parentNode}return null}}})(self);
(function(){for(var i=0,t=["webkit","moz"],n=0;n<t.length&&!window.requestAnimationFrame;++n)window.requestAnimationFrame=window[t[n]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[t[n]+"CancelAnimationFrame"]||window[t[n]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(n){var t=(new Date).getTime(),r=Math.max(0,16-(t-i)),u=window.setTimeout(function(){n(t+r)},r);return i=t+r,u});window.cancelAnimationFrame||(window.cancelAnimationFrame=function(n){clearTimeout(n)})})();
(function(a){"use strict";var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,_0,_1,_2,_3,_4,_5,_6,_7,_8,_9,_,$,ba,bb,bc,bd,be,bf,bg,bh,bi,bj,bk,bl,bm,bn,bo,bp,bq,br,bs,bt,bu,bv,bw,bx,by,bz,bA,bB,bC,bD,bE,bF,bG,bH,bI,bJ,bK,bL,bM,bN,bO,bP,bQ,bR,bS,bT,bU,bV,bW,bX,bY,bZ,b0,b1,b2;b=a.SpaList=a.SpaList||{};c=b.Client=b.Client||{};d=a.WebSharper=a.WebSharper||{};e=d.Obj=d.Obj||{};f=d.UI=d.UI||{};g=f.Var$1=f.Var$1||{};h=d.Operators=d.Operators||{};i=d.Remoting=d.Remoting||{};j=i.AjaxRemotingProvider=i.AjaxRemotingProvider||{};k=d.Collections=d.Collections||{};l=k.List=k.List||{};m=b.Server=b.Server||{};n=m.Person=m.Person||{};o=f.ListModel=f.ListModel||{};p=d.Seq=d.Seq||{};q=f.Templating=f.Templating||{};r=q.Runtime=q.Runtime||{};s=r.Server=r.Server||{};t=s.TemplateInstance=s.TemplateInstance||{};u=d.Arrays=d.Arrays||{};v=s.ProviderBuilder=s.ProviderBuilder||{};w=d.Unchecked=d.Unchecked||{};x=a.SpaList_Templates=a.SpaList_Templates||{};y=f.Doc=f.Doc||{};z=f.View=f.View||{};A=s.Handler=s.Handler||{};B=f.Var=f.Var||{};C=f.ConcreteVar=f.ConcreteVar||{};D=f.Snap=f.Snap||{};E=d.JavaScript=d.JavaScript||{};F=E.Pervasives=E.Pervasives||{};G=d.Concurrency=d.Concurrency||{};H=a.StartupCode$SpaList$Client=a.StartupCode$SpaList$Client||{};I=d.Enumerator=d.Enumerator||{};J=I.T=I.T||{};K=a.System=a.System||{};L=K.Guid=K.Guid||{};M=f.Array=f.Array||{};N=f.Client=f.Client||{};O=N.Templates=N.Templates||{};P=f.Abbrev=f.Abbrev||{};Q=P.Fresh=P.Fresh||{};R=G.AsyncBody=G.AsyncBody||{};S=k.Dictionary=k.Dictionary||{};T=G.CT=G.CT||{};U=E.JS=E.JS||{};V=a.Object;W=f.AttrProxy=f.AttrProxy||{};X=f.CheckedInput=f.CheckedInput||{};Y=d.Numeric=d.Numeric||{};Z=k.HashSet=k.HashSet||{};_0=s.TemplateInitializer=s.TemplateInitializer||{};_1=d.List=d.List||{};_2=_1.T=_1.T||{};_3=P.Async=P.Async||{};_4=f.DomUtility=f.DomUtility||{};_5=f.Docs=f.Docs||{};_6=d.DateUtil=d.DateUtil||{};_7=a.EventTarget;_8=a.Node;_9=G.Scheduler=G.Scheduler||{};_=f.Storage=f.Storage||{};$=a.StartupCode$WebSharper_Main$Concurrency=a.StartupCode$WebSharper_Main$Concurrency||{};ba=k.DictionaryUtil=k.DictionaryUtil||{};bb=f.DocElemNode=f.DocElemNode||{};bc=a.CharacterData;bd=a.StartupCode$WebSharper_UI$Templates=a.StartupCode$WebSharper_UI$Templates||{};be=a.WindowOrWorkerGlobalScope;bf=a.Error;bg=d.OperationCanceledException=d.OperationCanceledException||{};bh=d.Json=d.Json||{};bi=a.StartupCode$WebSharper_UI$Abbrev=a.StartupCode$WebSharper_UI$Abbrev||{};bj=_.ArrayStorage=_.ArrayStorage||{};bk=d.CancellationTokenSource=d.CancellationTokenSource||{};bl=f.Elt=f.Elt||{};bm=N.Attrs=N.Attrs||{};bn=bm.Dyn=bm.Dyn||{};bo=O.Prepare=O.Prepare||{};bp=d.Slice=d.Slice||{};bq=k.KeyCollection=k.KeyCollection||{};br=f.An=f.An||{};bs=N.Settings=N.Settings||{};bt=P.Mailbox=P.Mailbox||{};bu=a.StartupCode$WebSharper_Main$Remoting=a.StartupCode$WebSharper_Main$Remoting||{};bv=f.Attrs=f.Attrs||{};bw=f.AttrModule=f.AttrModule||{};bx=d.Strings=d.Strings||{};by=f.Updates=f.Updates||{};bz=k.ValueCollection=k.ValueCollection||{};bA=d.Queue=d.Queue||{};bB=N.Docs=N.Docs||{};bC=bB.RunState=bB.RunState||{};bD=bB.NodeSet=bB.NodeSet||{};bE=f.Anims=f.Anims||{};bF=a.StartupCode$WebSharper_UI$Doc_Proxy=a.StartupCode$WebSharper_UI$Doc_Proxy||{};bG=i.XhrProvider=i.XhrProvider||{};bH=k.HashSetUtil=k.HashSetUtil||{};bI=f.BindVar=f.BindVar||{};bJ=a.StartupCode$WebSharper_UI$Attr_Client=a.StartupCode$WebSharper_UI$Attr_Client||{};bK=a.StartupCode$WebSharper_UI$DomUtility=a.StartupCode$WebSharper_UI$DomUtility||{};bL=a.StartupCode$WebSharper_UI$Animation=a.StartupCode$WebSharper_UI$Animation||{};bM=f.AppendList=f.AppendList||{};bN=f.DynamicAttrNode=f.DynamicAttrNode||{};bO=f.String=f.String||{};bP=f.Easing=f.Easing||{};bQ=P.HashSet=P.HashSet||{};bR=d.Char=d.Char||{};bS=bB.DomNodes=bB.DomNodes||{};bT=d.Lazy=d.Lazy||{};bU=a.StartupCode$WebSharper_UI$AppendList=a.StartupCode$WebSharper_UI$AppendList||{};bV=d.LazyExtensionsProxy=d.LazyExtensionsProxy||{};bW=bV.LazyRecord=bV.LazyRecord||{};bX=a.IntelliFactory;bY=bX&&bX.Runtime;bZ=a.JSON;b0=a.console;b1=a.Math;b2=a.Date;c.Main=function(){var b3,b4,b5,b6,b7,b8,b9,b_,b$,ca,cb,cc,cd,ce;b3=g.Create$1("");b4=g.Create$1("");G.Start((b5=null,G.Delay(function(){return G.Bind((new j.New()).Async("SpaList:SpaList.Server.getAll:-1327522971",[]),function(cf){c.People().Set(cf);return G.Return(null);});})),null);y.EmbedView((b6=z.MapAsync(a.id,z.Const((b7=null,G.Delay(function(){return G.Bind((new j.New()).Async("SpaList:SpaList.Server.getAll:-1327522971",[]),function(cf){return G.Return(y.Concat(p.map(function(cg){var ch,ci,cj,ck;return(ch=(ci=new v.New$1(),(ci.h.push({$:1,$0:"name",$1:cg.Name}),ci)),(cj=A.CompleteHoles(ch.k,ch.h,[]),(ck=new t.New(cj[1],x.listitem(cj[0])),ch.i=ck,ck))).get_Doc();},cf)));});})))),z.WithInit(y.Element("p",[],[y.TextNode("loading...")]),b6)));b8=(b9=(b_=(b$=(ca=(cb=y.BindView(function(cf){return y.Concat(p.map(function(cg){var ch,ci,cj,ck,cl,cm;return(ch=(ci=(new a.Date(cg.Birthday)).toLocaleDateString(),(cj=(ck=new v.New$1(),(ck.h.push({$:1,$0:"name",$1:cg.Name}),ck)),(cj.h.push({$:1,$0:"birthday",$1:ci}),cj))),(cl=A.CompleteHoles(ch.k,ch.h,[]),(cm=new t.New(cl[1],x.listitem(cl[0])),ch.i=cm,cm))).get_Doc();},cf));},c.People().v),(cc=new v.New$1(),(cc.h.push({$:0,$0:"listcontainer",$1:cb}),cc))),(ca.h.push({$:8,$0:"name",$1:b3}),ca)),(b$.h.push({$:8,$0:"birthday",$1:b4}),b$)),(b_.h.push(A.EventQ2(b_.k,"add",function(){return b_.i;},function(){var cf,cg;cf=n.Init$1(b3.Get(),b4.Get());c.People().Append(cf);b3.Set("");b4.Set("");G.Start((cg=null,G.Delay(function(){return G.Bind((new j.New()).Async("SpaList:SpaList.Server.add:1223450582",[cf]),function(){return G.Return(null);});})),null);})),b_)),(cd=A.CompleteHoles(b9.k,b9.h,[["name",0],["birthday",0]]),(ce=new t.New(cd[1],x.main(cd[0])),b9.i=ce,ce))).get_Doc();O.LoadLocalTemplates("");y.RunById("main",b8);};c.People=function(){H.$cctor();return H.People;};e=d.Obj=bY.Class({Equals:function(b3){return this===b3;},GetHashCode:function(){return -1;}},null,e);e.New=bY.Ctor(function(){},e);g=f.Var$1=bY.Class({},e,g);g.Create$1=function(b3){return new C.New(false,D.New({$:2,$0:b3,$1:[]}),b3);};h.FailWith=function(b3){throw new bf(b3);};h.KeyValue=function(b3){return[b3.K,b3.V];};j=i.AjaxRemotingProvider=bY.Class({AsyncBase:function(b3,b4){var b5,b6;b5=this;b6=null;return G.Delay(function(){var b7,b8;b7=i.makeHeaders(b3);b8=i.makePayload(b4);return G.Bind(G.GetCT(),function(b9){return G.FromContinuations(function(b_,b$,ca){var cb,cc,cd;function ce(cf){return cb[0]?(cb[0]=false,ca(new bg.New(b9))):null;}cb=[true];cc=G.Register(b9,function(){ce();});cd=b5.get_EndPoint();return i.AjaxProvider().Async(cd,b7,b8,function(cf){if(cb[0]){cb[0]=false;cc.Dispose();b_(bh.Activate(bZ.parse(cf)));}},function(cf){if(cb[0]){cb[0]=false;cc.Dispose();b$(cf);}});});});});},get_EndPoint:function(){return i.EndPoint();},Async:function(b3,b4){return this.AsyncBase(b3,b4);}},e,j);j.New=bY.Ctor(function(){e.New.call(this);},j);l=k.List=bY.Class({GetEnumerator:function(){return I.Get(this);},GetEnumerator0:function(){return I.Get0(this);}},null,l);n.Init$1=function(b3,b4){return n.New(b3,_6.Parse(b4));};n.New=function(b3,b4){return{Name:b3,Birthday:b4};};o=f.ListModel=bY.Class({Set:function(b3){this["var"].Set(this.storage.SSet(b3));this.ObsoleteAll();},ObsoleteAll:function(){p.iter(function(b3){D.Obsolete(b3.V);},this.it);this.it.Clear();},Append:function(b3){var b4,b5,b6,b7;b4=this;b5=this["var"].Get();b6=this.key(b3);b7=u.tryFindIndex(function(b8){return w.Equals(b4.key(b8),b6);},b5);if(b7!=null&&b7.$==1)this["var"].Set(this.storage.SSetAt(b7.$0,b3,b5));else this["var"].Set(this.storage.SAppend(b3,b5));this.ObsoleteKey(b6);},ObsoleteKey:function(b3){var b4,b5;b4=(b5=null,[this.it.TryGetValue(b3,{get:function(){return b5;},set:function(b6){b5=b6;}}),b5]);if(b4[0]){D.Obsolete(b4[1]);this.it.Remove(b3);}},GetEnumerator:function(){return I.Get(this["var"].Get());},GetEnumerator0:function(){return I.Get0(this["var"].Get());}},e,o);o.New=bY.Ctor(function(b3,b4){o.New$3.call(this,b3,g.Create$1(u.ofSeq(p.distinctBy(b3,b4.SInit()))),b4);},o);o.New$3=bY.Ctor(function(b3,b4,b5){e.New.call(this);this.key=b3;this["var"]=b4;this.storage=b5;this.v=z.Map(function(b6){return b6.slice();},this["var"].get_View());this.it=new S.New$5();},o);p.map=function(b3,b4){return{GetEnumerator:function(){var b5;b5=I.Get(b4);return new J.New(null,null,function(b6){return b5.MoveNext()&&(b6.c=b3(b5.Current()),true);},function(){b5.Dispose();});}};};p.iter=function(b3,b4){var b5;b5=I.Get(b4);try{while(b5.MoveNext())b3(b5.Current());}finally{if(typeof b5=="object"&&"Dispose"in b5)b5.Dispose();}};p.append=function(b3,b4){return{GetEnumerator:function(){var b5,b6;b5=I.Get(b3);b6=[true];return new J.New(b5,null,function(b7){var b8;return b7.s.MoveNext()?(b7.c=b7.s.Current(),true):(b8=b7.s,!w.Equals(b8,null)?b8.Dispose():void 0,b7.s=null,b6[0]&&(b6[0]=false,b7.s=I.Get(b4),b7.s.MoveNext()?(b7.c=b7.s.Current(),true):(b7.s.Dispose(),b7.s=null,false)));},function(b7){var b8;b8=b7.s;if(!w.Equals(b8,null))b8.Dispose();});}};};p.head=function(b3){var b4;b4=I.Get(b3);try{return b4.MoveNext()?b4.Current():p.insufficient();}finally{if(typeof b4=="object"&&"Dispose"in b4)b4.Dispose();}};p.distinctBy=function(b3,b4){return{GetEnumerator:function(){var b5,b6;b5=I.Get(b4);b6=new Z.New$3();return new J.New(null,null,function(b7){var b8,b9;if(b5.MoveNext()){b8=b5.Current();b9=b6.Add(b3(b8));while(!b9&&b5.MoveNext()){b8=b5.Current();b9=b6.Add(b3(b8));}return b9&&(b7.c=b8,true);}else return false;},function(){b5.Dispose();});}};};p.fold=function(b3,b4,b5){var b6,b7;b6=b4;b7=I.Get(b5);try{while(b7.MoveNext())b6=b3(b6,b7.Current());return b6;}finally{if(typeof b7=="object"&&"Dispose"in b7)b7.Dispose();}};p.max=function(b3){var b4,b5,b6;b4=I.Get(b3);try{if(!b4.MoveNext())p.seqEmpty();b5=b4.Current();while(b4.MoveNext()){b6=b4.Current();if(w.Compare(b6,b5)===1)b5=b6;}return b5;}finally{if(typeof b4=="object"&&"Dispose"in b4)b4.Dispose();}};p.forall=function(b3,b4){return!p.exists(function(b5){return!b3(b5);},b4);};p.seqEmpty=function(){return h.FailWith("The input sequence was empty.");};p.exists=function(b3,b4){var b5,b6;b5=I.Get(b4);try{b6=false;while(!b6&&b5.MoveNext())b6=b3(b5.Current());return b6;}finally{if(typeof b5=="object"&&"Dispose"in b5)b5.Dispose();}};t=s.TemplateInstance=bY.Class({get_Doc:function(){return this.doc;}},e,t);t.New=bY.Ctor(function(b3,b4){e.New.call(this);this.doc=b4;this.allVars=b3.$==0?b3.$0:h.FailWith("Should not happen");},t);u.get=function(b3,b4){u.checkBounds(b3,b4);return b3[b4];};u.length=function(b3){return b3.dims===2?b3.length*b3.length:b3.length;};u.checkBounds=function(b3,b4){if(b4<0||b4>=b3.length)h.FailWith("Index was outside the bounds of the array.");};u.set=function(b3,b4,b5){u.checkBounds(b3,b4);b3[b4]=b5;};v=s.ProviderBuilder=bY.Class({},e,v);v.New$1=bY.Ctor(function(){var b3;e.New.call(this);this.i=null;this.k=(b3=L.NewGuid(),a.String(b3));this.h=[];bY.SetOptional(this,"s",null);},v);w.Equals=function(b3,b4){var b5,b6,b7,b8;if(b3===b4)return true;else{b5=typeof b3;if(b5=="object"){if(b3===null||b3===void 0||b4===null||b4===void 0||!w.Equals(typeof b4,"object"))return false;else if("Equals"in b3)return b3.Equals(b4);else if("Equals"in b4)return false;else if(b3 instanceof a.Array&&b4 instanceof a.Array)return w.arrayEquals(b3,b4);else if(b3 instanceof a.Date&&b4 instanceof a.Date)return w.dateEquals(b3,b4);else{b6=[true];for(var b9 in b3)if(function(b_){b6[0]=!b3.hasOwnProperty(b_)||b4.hasOwnProperty(b_)&&w.Equals(b3[b_],b4[b_]);return!b6[0];}(b9))break;if(b6[0]){for(var b_ in b4)if(function(b$){b6[0]=!b4.hasOwnProperty(b$)||b3.hasOwnProperty(b$);return!b6[0];}(b_))break;}return b6[0];}}else return b5=="function"&&("$Func"in b3?b3.$Func===b4.$Func&&b3.$Target===b4.$Target:"$Invokes"in b3&&"$Invokes"in b4&&w.arrayEquals(b3.$Invokes,b4.$Invokes));}};w.arrayEquals=function(b3,b4){var b5,b6;if(u.length(b3)===u.length(b4)){b5=true;b6=0;while(b5&&b6<u.length(b3)){!w.Equals(u.get(b3,b6),u.get(b4,b6))?b5=false:void 0;b6=b6+1;}return b5;}else return false;};w.dateEquals=function(b3,b4){return b3.getTime()===b4.getTime();};w.Hash=function(b3){var b4;b4=typeof b3;return b4=="function"?0:b4=="boolean"?b3?1:0:b4=="number"?b3:b4=="string"?w.hashString(b3):b4=="object"?b3==null?0:b3 instanceof a.Array?w.hashArray(b3):w.hashObject(b3):0;};w.hashString=function(b3){var b4,b5,b6;if(b3===null)return 0;else{b4=5381;for(b5=0,b6=b3.length-1;b5<=b6;b5++)b4=w.hashMix(b4,b3[b5].charCodeAt());return b4;}};w.hashArray=function(b3){var b4,b5,b6;b4=-34948909;for(b5=0,b6=u.length(b3)-1;b5<=b6;b5++)b4=w.hashMix(b4,w.Hash(u.get(b3,b5)));return b4;};w.hashObject=function(b3){var b4,b5;if("GetHashCode"in b3)return b3.GetHashCode();else{b4=[0];for(var b6 in b3)if(function(b7){b4[0]=w.hashMix(w.hashMix(b4[0],w.hashString(b7)),w.Hash(b3[b7]));return false;}(b6))break;return b4[0];}};w.hashMix=function(b3,b4){return(b3<<5)+b3+b4;};w.Compare=function(b3,b4){var b5,b6,b7,b8,b9,b_;if(b3===b4)return 0;else{b6=typeof b3;switch(b6=="function"?1:b6=="boolean"?2:b6=="number"?2:b6=="string"?2:b6=="object"?3:0){case 0:return typeof b4=="undefined"?0:-1;case 1:return h.FailWith("Cannot compare function values.");case 2:return b3<b4?-1:1;case 3:if(b3===null)b7=-1;else if(b4===null)b7=1;else if("CompareTo"in b3)b7=b3.CompareTo(b4);else if("CompareTo0"in b3)b7=b3.CompareTo0(b4);else if(b3 instanceof a.Array&&b4 instanceof a.Array)b7=w.compareArrays(b3,b4);else if(b3 instanceof a.Date&&b4 instanceof a.Date)b7=w.compareDates(b3,b4);else{b8=[0];for(var b$ in b3)if(function(ca){return!b3.hasOwnProperty(ca)?false:!b4.hasOwnProperty(ca)?(b8[0]=1,true):(b8[0]=w.Compare(b3[ca],b4[ca]),b8[0]!==0);}(b$))break;if(b8[0]===0){for(var ca in b4)if(function(cb){return!b4.hasOwnProperty(cb)?false:!b3.hasOwnProperty(cb)&&(b8[0]=-1,true);}(ca))break;}b7=b8[0];}return b7;}}};w.compareArrays=function(b3,b4){var b5,b6;if(u.length(b3)<u.length(b4))return -1;else if(u.length(b3)>u.length(b4))return 1;else{b5=0;b6=0;while(b5===0&&b6<u.length(b3)){b5=w.Compare(u.get(b3,b6),u.get(b4,b6));b6=b6+1;}return b5;}};w.compareDates=function(b3,b4){return w.Compare(b3.getTime(),b4.getTime());};x.listitem=function(b3){O.LoadLocalTemplates("index");return b3?O.NamedTemplate("index",{$:1,$0:"listitem"},b3):void 0;};x.main=function(b3){O.LoadLocalTemplates("index");return b3?O.NamedTemplate("index",{$:1,$0:"main"},b3):void 0;};y=f.Doc=bY.Class({},e,y);y.Concat=function(b3){var b4;b4=M.ofSeqNonCopying(b3);return M.TreeReduce(y.get_Empty(),y.Append,b4);};y.Append=function(b3,b4){return y.Mk({$:0,$0:b3.docNode,$1:b4.docNode},z.Map2Unit(b3.updates,b4.updates));};y.get_Empty=function(){return y.Mk(null,z.Const());};y.TextNode=function(b3){return y.Mk({$:5,$0:self.document.createTextNode(b3)},z.Const());};y.EmbedView=function(b3){var b4;b4=_5.CreateEmbedNode();return y.Mk({$:2,$0:b4},z.Map(a.ignore,z.Bind(function(b5){_5.UpdateEmbedNode(b4,b5.docNode);return b5.updates;},b3)));};y.BindView=function(b3,b4){return y.EmbedView(z.Map(b3,b4));};y.RunById=function(b3,b4){var b5;b5=self.document.getElementById(b3);if(w.Equals(b5,null))h.FailWith("invalid id: "+b3);else y.Run(b5,b4);};y.Mk=function(b3,b4){return new y.New(b3,b4);};y.Element=function(b3,b4,b5){var b6,b7;b6=W.Concat(b4);b7=y.Concat(b5);return bl.New(self.document.createElement(b3),b6,b7);};y.Run=function(b3,b4){_5.LinkElement(b3,b4.docNode);y.RunInPlace(false,b3,b4);};y.RunInPlace=function(b3,b4,b5){var b6;b6=_5.CreateRunState(b4,b5.docNode);z.Sink(br.get_UseAnimations()||bs.BatchUpdatesEnabled()?bt.StartProcessor(_5.PerformAnimatedUpdate(b3,b6,b5.docNode)):function(){_5.PerformSyncUpdate(b3,b6,b5.docNode);},b5.updates);};y.TextView=function(b3){var b4;b4=_5.CreateTextNode();return y.Mk({$:4,$0:b4},z.Map(function(b5){_5.UpdateTextNode(b4,b5);},b3));};y.New=bY.Ctor(function(b3,b4){e.New.call(this);this.docNode=b3;this.updates=b4;},y);z.Const=function(b3){var b4;b4=D.New({$:0,$0:b3});return function(){return b4;};};z.MapAsync=function(b3,b4){return z.CreateLazy(function(){return D.MapAsync(b3,b4());});};z.WithInit=function(b3,b4){return z.CreateLazy(function(){return D.WithInit(b3,b4());});};z.CreateLazy=function(b3){var b4;b4={c:null,o:b3};return function(){var b5,b6;b5=b4.c;return b5===null?(b5=b4.o(),b4.c=b5,(b6=b5.s,b6!=null&&b6.$==0)?b4.o=null:D.WhenObsoleteRun(b5,function(){b4.c=null;}),b5):b5;};};z.Map2Unit=function(b3,b4){return z.CreateLazy(function(){return D.Map2Unit(b3(),b4());});};z.Bind=function(b3,b4){return z.Join(z.Map(b3,b4));};z.Map=function(b3,b4){return z.CreateLazy(function(){return D.Map(b3,b4());});};z.Join=function(b3){return z.CreateLazy(function(){return D.Join(b3());});};z.Sink=function(b3,b4){function b5(){D.WhenRun(b4(),b3,function(){G.scheduler().Fork(b5);});}G.scheduler().Fork(b5);};z.Map3=function(b3,b4,b5,b6){return z.CreateLazy(function(){return D.Map3(b3,b4(),b5(),b6());});};z.Sequence=function(b3){return z.CreateLazy(function(){return D.Sequence(p.map(function(b4){return b4();},b3));});};z.Map2=function(b3,b4,b5){return z.CreateLazy(function(){return D.Map2(b3,b4(),b5());});};A.EventQ2=function(b3,b4,b5,b6){return{$:5,$0:b4,$1:function(b7){return function(b8){return b6({Vars:b5(),Target:b7,Event:b8});};}};};A.CompleteHoles=function(b3,b4,b5){var b7,b8,b9,b_,b$;function b6(ca,cb){var cc;return b8.Contains(ca)?null:(cc=w.Equals(cb,0)?_0.GetOrAddHoleFor(b3,ca,function(){return{$:8,$0:ca,$1:g.Create$1("")};}):w.Equals(cb,1)?_0.GetOrAddHoleFor(b3,ca,function(){return{$:13,$0:ca,$1:g.Create$1(0)};}):w.Equals(cb,2)?_0.GetOrAddHoleFor(b3,ca,function(){return{$:9,$0:ca,$1:g.Create$1(false)};}):h.FailWith("Invalid value type"),(b7.set_Item(ca,cc),{$:1,$0:cc}));}b7=new S.New$5();b8=new Z.New$3();b9=I.Get(b4);try{while(b9.MoveNext()){b_=b9.Current();b$=b_.$0;b8.Add(b$);b7.set_Item(b$,b_);}}finally{if(typeof b9=="object"&&"Dispose"in b9)b9.Dispose();}return[p.append(b4,u.choose(function(ca){return b6(ca[0],ca[1]);},b5)),{$:0,$0:b7}];};B=f.Var=bY.Class({},e,B);B.New=bY.Ctor(function(){e.New.call(this);},B);C=f.ConcreteVar=bY.Class({Get:function(){return this.current;},Set:function(b3){if(this.isConst)(function(b4){return b4("WebSharper.UI: invalid attempt to change value of a Var after calling SetFinal");}(function(b4){b0.log(b4);}));else{D.Obsolete(this.snap);this.current=b3;this.snap=D.New({$:2,$0:b3,$1:[]});}},get_View:function(){return this.view;},UpdateMaybe:function(b3){var b4;b4=b3(this.Get());if(b4!=null&&b4.$==1)this.Set(b4.$0);}},B,C);C.New=bY.Ctor(function(b3,b4,b5){var b6;b6=this;B.New.call(this);this.isConst=b3;this.current=b5;this.snap=b4;this.view=function(){return b6.snap;};this.id=Q.Int();},C);D.MapAsync=function(b3,b4){var b5;b5=D.New({$:3,$0:[],$1:[]});D.When(b4,function(b6){_3.StartTo(b3(b6),function(b7){D.MarkDone(b5,b4,b7);});},b5);return b5;};D.WithInit=function(b3,b4){var b5,b6,b7;b5=b4.s;return b5==null?b4:b5!=null&&b5.$==2?(b6=D.New({$:2,$0:b5.$0,$1:[]}),(D.WhenObsolete(b4,b6),b6)):b5!=null&&b5.$==3?(b7=D.New({$:2,$0:b3,$1:[]}),(D.When(b4,function(){D.Obsolete(b7);},b7),b7)):b4;};D.WhenObsoleteRun=function(b3,b4){var b5;b5=b3.s;if(b5==null)b4();else b5!=null&&b5.$==2?b5.$1.push(b4):b5!=null&&b5.$==3?b5.$1.push(b4):void 0;};D.When=function(b3,b4,b5){var b6;b6=b3.s;if(b6==null)D.Obsolete(b5);else b6!=null&&b6.$==2?(D.EnqueueSafe(b6.$1,b5),b4(b6.$0)):b6!=null&&b6.$==3?(b6.$0.push(b4),D.EnqueueSafe(b6.$1,b5)):b4(b6.$0);};D.MarkDone=function(b3,b4,b5){var b6;if(b6=b4.s,b6!=null&&b6.$==0)D.MarkForever(b3,b5);else D.MarkReady(b3,b5);};D.WhenObsolete=function(b3,b4){var b5;b5=b3.s;if(b5==null)D.Obsolete(b4);else b5!=null&&b5.$==2?D.EnqueueSafe(b5.$1,b4):b5!=null&&b5.$==3?D.EnqueueSafe(b5.$1,b4):void 0;};D.Map2Unit=function(b3,b4){var b5,b6,b7;function b8(){var b9,b_,b$;if(!(b9=b7.s,b9!=null&&b9.$==0||b9!=null&&b9.$==2)){b_=D.ValueAndForever(b3);b$=D.ValueAndForever(b4);if(b_!=null&&b_.$==1)b$!=null&&b$.$==1?b_.$0[1]&&b$.$0[1]?D.MarkForever(b7,null):D.MarkReady(b7,null):void 0;}}b5=b3.s;b6=b4.s;return b5!=null&&b5.$==0?b6!=null&&b6.$==0?D.New({$:0,$0:null}):b4:b6!=null&&b6.$==0?b3:(b7=D.New({$:3,$0:[],$1:[]}),(D.When(b3,b8,b7),D.When(b4,b8,b7),b7));};D.EnqueueSafe=function(b3,b4){var b5,b6,b7,b8;b3.push(b4);if(b3.length%20===0){b5=b3.slice(0);bA.Clear(b3);for(b6=0,b7=u.length(b5)-1;b6<=b7;b6++){b8=u.get(b5,b6);if(typeof b8=="object")(function(b9){if(b9.s)b3.push(b9);}(b8));else(function(b9){b3.push(b9);}(b8));}}else void 0;};D.MarkForever=function(b3,b4){var b5,b6,b7,b8;b5=b3.s;if(b5!=null&&b5.$==3){b3.s={$:0,$0:b4};b6=b5.$0;for(b7=0,b8=u.length(b6)-1;b7<=b8;b7++)(u.get(b6,b7))(b4);}else void 0;};D.MarkReady=function(b3,b4){var b5,b6,b7,b8;b5=b3.s;if(b5!=null&&b5.$==3){b3.s={$:2,$0:b4,$1:b5.$1};b6=b5.$0;for(b7=0,b8=u.length(b6)-1;b7<=b8;b7++)(u.get(b6,b7))(b4);}else void 0;};D.Map=function(b3,b4){var b5,b6;b5=b4.s;return b5!=null&&b5.$==0?D.New({$:0,$0:b3(b5.$0)}):(b6=D.New({$:3,$0:[],$1:[]}),(D.When(b4,function(b7){D.MarkDone(b6,b4,b3(b7));},b6),b6));};D.ValueAndForever=function(b3){var b4;b4=b3.s;return b4!=null&&b4.$==0?{$:1,$0:[b4.$0,true]}:b4!=null&&b4.$==2?{$:1,$0:[b4.$0,false]}:null;};D.Join=function(b3){var b4;b4=D.New({$:3,$0:[],$1:[]});D.When(b3,function(b5){var b6;b6=b5();D.When(b6,function(b7){var b8,b9;if((b8=b6.s,b8!=null&&b8.$==0)&&(b9=b3.s,b9!=null&&b9.$==0))D.MarkForever(b4,b7);else D.MarkReady(b4,b7);},b4);},b4);return b4;};D.WhenRun=function(b3,b4,b5){var b6;b6=b3.s;if(b6==null)b5();else b6!=null&&b6.$==2?(b6.$1.push(b5),b4(b6.$0)):b6!=null&&b6.$==3?(b6.$0.push(b4),b6.$1.push(b5)):b4(b6.$0);};D.Map3=function(b3,b4,b5,b6){var b7,b8,b9,b_;function b$(ca){var cb,cc,cd,ce;if(!(cb=b_.s,cb!=null&&cb.$==0||cb!=null&&cb.$==2)){cc=D.ValueAndForever(b4);cd=D.ValueAndForever(b5);ce=D.ValueAndForever(b6);if(cc!=null&&cc.$==1)cd!=null&&cd.$==1?ce!=null&&ce.$==1?cc.$0[1]&&cd.$0[1]&&ce.$0[1]?D.MarkForever(b_,b3(cc.$0[0],cd.$0[0],ce.$0[0])):D.MarkReady(b_,b3(cc.$0[0],cd.$0[0],ce.$0[0])):void 0:void 0;}}b7=b4.s;b8=b5.s;b9=b6.s;return b7!=null&&b7.$==0?b8!=null&&b8.$==0?b9!=null&&b9.$==0?D.New({$:0,$0:b3(b7.$0,b8.$0,b9.$0)}):D.Map3Opt1(b3,b7.$0,b8.$0,b6):b9!=null&&b9.$==0?D.Map3Opt2(b3,b7.$0,b9.$0,b5):D.Map3Opt3(b3,b7.$0,b5,b6):b8!=null&&b8.$==0?b9!=null&&b9.$==0?D.Map3Opt4(b3,b8.$0,b9.$0,b4):D.Map3Opt5(b3,b8.$0,b4,b6):b9!=null&&b9.$==0?D.Map3Opt6(b3,b9.$0,b4,b5):(b_=D.New({$:3,$0:[],$1:[]}),(D.When(b4,b$,b_),D.When(b5,b$,b_),D.When(b6,b$,b_),b_));};D.Sequence=function(b3){var b4,b5,b6;function b7(b8){var b9;if(b6[0]===0){b9=u.map(function(b_){var b$;b$=b_.s;return b$!=null&&b$.$==0?b$.$0:b$!=null&&b$.$==2?b$.$0:h.FailWith("value not found by View.Sequence");},b4);if(u.forall(function(b_){var b$;b$=b_.s;return b$!=null&&b$.$==0;},b4))D.MarkForever(b5,b9);else D.MarkReady(b5,b9);}else b6[0]--;}b4=u.ofSeq(b3);return b4.length==0?D.New({$:0,$0:[]}):(b5=D.New({$:3,$0:[],$1:[]}),(b6=[u.length(b4)-1],(u.iter(function(b8){D.When(b8,b7,b5);},b4),b5)));};D.Map2=function(b3,b4,b5){var b6,b7,b8;function b9(b_){var b$,ca,cb;if(!(b$=b8.s,b$!=null&&b$.$==0||b$!=null&&b$.$==2)){ca=D.ValueAndForever(b4);cb=D.ValueAndForever(b5);if(ca!=null&&ca.$==1)cb!=null&&cb.$==1?ca.$0[1]&&cb.$0[1]?D.MarkForever(b8,b3(ca.$0[0],cb.$0[0])):D.MarkReady(b8,b3(ca.$0[0],cb.$0[0])):void 0;}}b6=b4.s;b7=b5.s;return b6!=null&&b6.$==0?b7!=null&&b7.$==0?D.New({$:0,$0:b3(b6.$0,b7.$0)}):D.Map2Opt1(b3,b6.$0,b5):b7!=null&&b7.$==0?D.Map2Opt2(b3,b7.$0,b4):(b8=D.New({$:3,$0:[],$1:[]}),(D.When(b4,b9,b8),D.When(b5,b9,b8),b8));};D.Copy=function(b3){var b4,b5,b6;b4=b3.s;return b4==null?b3:b4!=null&&b4.$==2?(b5=D.New({$:2,$0:b4.$0,$1:[]}),(D.WhenObsolete(b3,b5),b5)):b4!=null&&b4.$==3?(b6=D.New({$:3,$0:[],$1:[]}),(D.When(b3,function(b7){D.MarkDone(b6,b3,b7);},b6),b6)):b3;};D.Map3Opt1=function(b3,b4,b5,b6){return D.Map(function(b7){return b3(b4,b5,b7);},b6);};D.Map3Opt2=function(b3,b4,b5,b6){return D.Map(function(b7){return b3(b4,b7,b5);},b6);};D.Map3Opt3=function(b3,b4,b5,b6){return D.Map2(function(b7,b8){return b3(b4,b7,b8);},b5,b6);};D.Map3Opt4=function(b3,b4,b5,b6){return D.Map(function(b7){return b3(b7,b4,b5);},b6);};D.Map3Opt5=function(b3,b4,b5,b6){return D.Map2(function(b7,b8){return b3(b7,b4,b8);},b5,b6);};D.Map3Opt6=function(b3,b4,b5,b6){return D.Map2(function(b7,b8){return b3(b7,b8,b4);},b5,b6);};D.Map2Opt1=function(b3,b4,b5){return D.Map(function(b6){return b3(b4,b6);},b5);};D.Map2Opt2=function(b3,b4,b5){return D.Map(function(b6){return b3(b6,b4);},b5);};F.NewFromSeq=function(b3){var b4,b5,b6;b4={};b5=I.Get(b3);try{while(b5.MoveNext()){b6=b5.Current();b4[b6[0]]=b6[1];}}finally{if(typeof b5=="object"&&"Dispose"in b5)b5.Dispose();}return b4;};G.Delay=function(b3){return function(b4){try{(b3(null))(b4);}catch(b5){b4.k({$:1,$0:b5});}};};G.Bind=function(b3,b4){return G.checkCancel(function(b5){b3(R.New(function(b6){var b7;if(b6.$==0){b7=b6.$0;G.scheduler().Fork(function(){try{(b4(b7))(b5);}catch(b8){b5.k({$:1,$0:b8});}});}else G.scheduler().Fork(function(){b5.k(b6);});},b5.ct));});};G.Return=function(b3){return function(b4){b4.k({$:0,$0:b3});};};G.Start=function(b3,b4){var b5,b6;b5=(b6=(G.defCTS())[0],b4==null?b6:b4.$0);G.scheduler().Fork(function(){if(!b5.c)b3(R.New(function(b7){if(b7.$==1)G.UncaughtAsyncError(b7.$0);},b5));});};G.checkCancel=function(b3){return function(b4){if(b4.ct.c)G.cancel(b4);else b3(b4);};};G.defCTS=function(){$.$cctor();return $.defCTS;};G.UncaughtAsyncError=function(b3){b0.log("WebSharper: Uncaught asynchronous exception",b3);};G.cancel=function(b3){b3.k({$:2,$0:new bg.New(b3.ct)});};G.scheduler=function(){$.$cctor();return $.scheduler;};G.StartWithContinuations=function(b3,b4,b5,b6,b7){var b8,b9;b8=(b9=(G.defCTS())[0],b7==null?b9:b7.$0);if(!b8.c)b3(R.New(function(b_){if(b_.$==1)b5(b_.$0);else if(b_.$==2)b6(b_.$0);else b4(b_.$0);},b8));};G.GetCT=function(){$.$cctor();return $.GetCT;};G.FromContinuations=function(b3){return function(b4){var b5;function b6(b7){if(b5[0])h.FailWith("A continuation provided by Async.FromContinuations was invoked multiple times");else{b5[0]=true;G.scheduler().Fork(b7);}}b5=[false];b3(function(b7){b6(function(){b4.k({$:0,$0:b7});});},function(b7){b6(function(){b4.k({$:1,$0:b7});});},function(b7){b6(function(){b4.k({$:2,$0:b7});});});};};G.Register=function(b3,b4){var b5;return b3===G.noneCT()?{Dispose:function(){return null;}}:(b5=b3.r.push(b4)-1,{Dispose:function(){return u.set(b3.r,b5,a.ignore);}});};G.noneCT=function(){$.$cctor();return $.noneCT;};G.Zero=function(){$.$cctor();return $.Zero;};H.$cctor=function(){H.$cctor=a.ignore;H.People=o.Create(function(b3){return b3.Name;},[]);};I.Get=function(b3){return b3 instanceof a.Array?I.ArrayEnumerator(b3):w.Equals(typeof b3,"string")?I.StringEnumerator(b3):b3.GetEnumerator();};I.ArrayEnumerator=function(b3){return new J.New(0,null,function(b4){var b5;b5=b4.s;return b5<u.length(b3)&&(b4.c=u.get(b3,b5),b4.s=b5+1,true);},void 0);};I.StringEnumerator=function(b3){return new J.New(0,null,function(b4){var b5;b5=b4.s;return b5<b3.length&&(b4.c=b3[b5],b4.s=b5+1,true);},void 0);};I.Get0=function(b3){return b3 instanceof a.Array?I.ArrayEnumerator(b3):w.Equals(typeof b3,"string")?I.StringEnumerator(b3):"GetEnumerator0"in b3?b3.GetEnumerator0():b3.GetEnumerator();};J=I.T=bY.Class({Dispose:function(){if(this.d)this.d(this);},MoveNext:function(){return this.n(this);},Current:function(){return this.c;}},e,J);J.New=bY.Ctor(function(b3,b4,b5,b6){e.New.call(this);this.s=b3;this.c=b4;this.n=b5;this.d=b6;},J);L.NewGuid=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(new a.RegExp("[xy]","g"),function(b3){var b4,b5;b4=b1.random()*16|0;b5=b3=="x"?b4:b4&3|8;return b5.toString(16);});};M.ofSeqNonCopying=function(b3){var b4,b5;if(b3 instanceof a.Array)return b3;else if(b3 instanceof _2)return u.ofList(b3);else if(b3===null)return[];else{b4=[];b5=I.Get(b3);try{while(b5.MoveNext())b4.push(b5.Current());return b4;}finally{if(typeof b5=="object"&&"Dispose"in b5)b5.Dispose();}}};M.TreeReduce=function(b3,b4,b5){var b6;function b7(b8){return function(b9){var b_,b$;return b9<=0?b3:b9===1&&(b8>=0&&b8<b6)?u.get(b5,b8):(b$=b9/2>>0,b4((b7(b8))(b$),(b7(b8+b$))(b9-b$)));};}b6=u.length(b5);return(b7(0))(b6);};M.MapTreeReduce=function(b3,b4,b5,b6){var b7;function b8(b9){return function(b_){var b$,ca;return b_<=0?b4:b_===1&&(b9>=0&&b9<b7)?b3(u.get(b6,b9)):(ca=b_/2>>0,b5((b8(b9))(ca),(b8(b9+ca))(b_-ca)));};}b7=u.length(b6);return(b8(0))(b7);};O.LoadLocalTemplates=function(b3){!O.LocalTemplatesLoaded()?(O.set_LocalTemplatesLoaded(true),O.LoadNestedTemplates(self.document.body,"")):void 0;O.LoadedTemplates().set_Item(b3,O.LoadedTemplateFile(""));};O.NamedTemplate=function(b3,b4,b5){var b6,b7;b6=(b7=null,[O.LoadedTemplateFile(b3).TryGetValue(b4==null?"":b4.$0,{get:function(){return b7;},set:function(b8){b7=b8;}}),b7]);return b6[0]?O.ChildrenTemplate(b6[1].cloneNode(true),b5):(b0.warn("Local template doesn't exist",b4),y.get_Empty());};O.LocalTemplatesLoaded=function(){bd.$cctor();return bd.LocalTemplatesLoaded;};O.set_LocalTemplatesLoaded=function(b3){bd.$cctor();bd.LocalTemplatesLoaded=b3;};O.LoadNestedTemplates=function(b3,b4){var b6,b7,b8,b9,b_,b$,ca,cb,cc,cd,ce,cf,cg;function b5(ch){var ci,cj;if(!b6.ContainsKey(ch)){ci=(cj=null,[b7.TryGetValue(ch,{get:function(){return cj;},set:function(ck){cj=ck;}}),cj]);if(ci[0]){cg.Add(ch);b7.Remove(ch);O.PrepareTemplateStrict(b4,{$:1,$0:ch},ci[1],{$:1,$0:b5});}else b0.warn(cg.Contains(ch)?"Encountered loop when instantiating "+ch:"Local template does not exist: "+ch);}}b6=O.LoadedTemplateFile(b4);b7=new S.New$5();b8=b3.querySelectorAll("[ws-template]");for(b9=0,b_=b8.length-1;b9<=b_;b9++){b$=b8[b9];ca=b$.getAttribute("ws-template").toLowerCase();b$.removeAttribute("ws-template");b7.set_Item(ca,O.FakeRootSingle(b$));}cb=b3.querySelectorAll("[ws-children-template]");for(cc=0,cd=cb.length-1;cc<=cd;cc++){ce=cb[cc];cf=ce.getAttribute("ws-children-template").toLowerCase();ce.removeAttribute("ws-children-template");b7.set_Item(cf,O.FakeRoot(ce));}cg=new Z.New$3();while(b7.count>0)b5(p.head(b7.get_Keys()));};O.LoadedTemplates=function(){bd.$cctor();return bd.LoadedTemplates;};O.LoadedTemplateFile=function(b3){var b4,b5,b6;b4=(b5=null,[O.LoadedTemplates().TryGetValue(b3,{get:function(){return b5;},set:function(b7){b5=b7;}}),b5]);return b4[0]?b4[1]:(b6=new S.New$5(),(O.LoadedTemplates().set_Item(b3,b6),b6));};O.ChildrenTemplate=function(b3,b4){var b5,b6,b7,b8,b9;b5=O.InlineTemplate(b3,p.append(b4,O.GlobalHoles().get_Values()));b6=b5[1];b7=b5[0];b8=b7.Els;return!w.Equals(b8,null)&&b8.length===1&&(u.get(b8,0)instanceof _8&&(w.Equals(u.get(b8,0).nodeType,_8.ELEMENT_NODE)&&(b9=u.get(b8,0),true)))?bl.TreeNode(b7,b6):y.Mk({$:6,$0:b7},b6);};O.FakeRootSingle=function(b3){var b4,b5,b6,b7;b3.removeAttribute("ws-template");b4=b3.getAttribute("ws-replace");if(b4===null);else{b3.removeAttribute("ws-replace");b5=b3.parentNode;w.Equals(b5,null)?void 0:(b6=self.document.createElement(b3.tagName),b6.setAttribute("ws-replace",b4),b5.replaceChild(b6,b3));}b7=self.document.createElement("div");b7.appendChild(b3);return b7;};O.FakeRoot=function(b3){var b4;b4=self.document.createElement("div");while(b3.hasChildNodes())b4.appendChild(b3.firstChild);return b4;};O.PrepareTemplateStrict=function(b3,b4,b5,b6){var b7;function b8(cc,cd){var ce,cf,cg,ch,ci,ck,cl,cm,cn,co,cp,cq,cr,cs,ct,cu,cv,cw,cx,cy,cz,cA,cB,cC,cD,cE;function cj(cF){}while(true)switch(cc){case 0:if(cd!==null){ce=cd.nextSibling;if(w.Equals(cd.nodeType,_8.TEXT_NODE))bo.convertTextNode(cd);else if(w.Equals(cd.nodeType,_8.ELEMENT_NODE))b_(cd);cd=ce;}else return null;break;case 1:ck=bp.string(cd.nodeName,{$:1,$0:3},null).toLowerCase();cl=(cf=ck.indexOf("."),cf===-1?[b3,ck]:[bp.string(ck,null,{$:1,$0:cf-1}),bp.string(ck,{$:1,$0:cf+1},null)]);cm=cl[1];cn=cl[0];if(cn!==""&&!O.LoadedTemplates().ContainsKey(cn))return bo.failNotLoaded(cm);else{if(cn===""&&b6!=null)b6.$0(cm);co=O.LoadedTemplates().get_Item(cn);if(!co.ContainsKey(cm))return bo.failNotLoaded(cm);else{cp=co.get_Item(cm);cq=cp.cloneNode(true);cr=new Z.New$3();cs=new S.New$5();ct=cd.attributes;for(cu=0,cv=ct.length-1;cu<=cv;cu++){cw=ct.item(cu).name.toLowerCase();cs.set_Item(cw,(cx=ct.item(cu).nodeValue,cx===""?cw:cx.toLowerCase()));if(!cr.Add(cw))b0.warn("Hole mapped twice",cw);}for(cy=0,cz=cd.childNodes.length-1;cy<=cz;cy++){cA=cd.childNodes[cy];if(w.Equals(cA.nodeType,_8.ELEMENT_NODE))!cr.Add(cA.nodeName.toLowerCase())?b0.warn("Hole filled twice",cm):void 0;}cB=cd.childNodes.length===1&&w.Equals(cd.firstChild.nodeType,_8.TEXT_NODE);if(cB){ch=bo.fillTextHole(cq,cd.firstChild.textContent,cm);((function(cF){return function(cG){if(cG!=null)cF(cG.$0);};}((ci=function(cF){return function(cG){return cF.Add(cG);};}(cr),function(cF){return cj(ci(cF));})))(ch));}bo.removeHolesExcept(cq,cr);if(!cB){for(cC=0,cD=cd.childNodes.length-1;cC<=cD;cC++){cE=cd.childNodes[cC];if(w.Equals(cE.nodeType,_8.ELEMENT_NODE))cE.hasAttributes()?bo.fillInstanceAttrs(cq,cE):b9(cq,cE);}}bo.mapHoles(cq,cs);bo.fill(cq,cd.parentNode,cd);cd.parentNode.removeChild(cd);return;}}break;}}function b9(cc,cd){var ce,cg,ch;function cf(ci,cj){var ck;if(cg==="title"&&cd.hasChildNodes()){ck=_4.ParseHTMLIntoFakeRoot(cd.textContent);cd.removeChild(cd.firstChild);while(ck.hasChildNodes())cd.appendChild(ck.firstChild);}else null;b_(cd);return bo.fill(cd,ci,cj);}cg=cd.nodeName.toLowerCase();O.foreachNotPreserved(cc,"[ws-attr-holes]",function(ci){var cj,ck,cl,cm,cn;cj=bx.SplitChars(ci.getAttribute("ws-attr-holes"),[" "],1);for(ck=0,cl=cj.length-1;ck<=cl;ck++){cm=u.get(cj,ck);ci.setAttribute(cm,(cn=new a.RegExp("\\${"+cg+"}","ig"),ci.getAttribute(cm).replace(cn,cd.textContent)));}});ch=cc.querySelector("[ws-hole="+cg+"]");if(w.Equals(ch,null)){ce=cc.querySelector("[ws-replace="+cg+"]");return w.Equals(ce,null)?null:(cf(ce.parentNode,ce),void ce.parentNode.removeChild(ce));}else{while(ch.hasChildNodes())ch.removeChild(ch.lastChild);ch.removeAttribute("ws-hole");return cf(ch,null);}}function b_(cc){if(!cc.hasAttribute("ws-preserve"))if(bx.StartsWith(cc.nodeName.toLowerCase(),"ws-"))ca(cc);else{bo.convertAttrs(cc);b$(cc.firstChild);}}function b$(cc){return b8(0,cc);}function ca(cc){return b8(1,cc);}function cb(cc){var cd,ce,cf,cg;while(true){cd=cc.querySelector("[ws-template]");if(w.Equals(cd,null)){ce=cc.querySelector("[ws-children-template]");if(w.Equals(ce,null))return null;else{cf=ce.getAttribute("ws-children-template");ce.removeAttribute("ws-children-template");O.PrepareTemplateStrict(b3,{$:1,$0:cf},ce,null);cc=cc;}}else{cg=cd.getAttribute("ws-template");(O.PrepareSingleTemplate(b3,{$:1,$0:cg},cd))(null);cc=cc;}}}b7=(b4==null?"":b4.$0).toLowerCase();O.LoadedTemplateFile(b3).set_Item(b7,b5);if(b5.hasChildNodes()){cb(b5);b$(b5.firstChild);}};O.InlineTemplate=function(b3,b4){var b5,b6,b7,b8,b$,ca,cb,cc,cd,ce,cf;function b9(cg,ch){var ci,cj,ck;ci=bv.Insert(cg,ch);ca.push(bv.Updates(ci));cb.push([cg,ci]);cj=bY.GetOptional(ci.OnAfterRender);return cj==null?null:(ck=cj.$0,void cc.push(function(){ck(cg);}));}function b_(cg){var ch,ci;ch=(ci=null,[cd.TryGetValue(cg,{get:function(){return ci;},set:function(cj){ci=cj;}}),ci]);return ch[0]?ch[1].$==0?{$:1,$0:ch[1].$1}:ch[1].$==1?{$:1,$0:y.TextNode(ch[1].$1)}:ch[1].$==2?{$:1,$0:y.TextView(ch[1].$1)}:ch[1].$==8?{$:1,$0:y.TextView(ch[1].$1.get_View())}:ch[1].$==9?{$:1,$0:y.TextView(z.Map(a.String,ch[1].$1.get_View()))}:ch[1].$==10?{$:1,$0:y.TextView(z.Map(function(cj){return cj.get_Input();},ch[1].$1.get_View()))}:ch[1].$==11?{$:1,$0:y.TextView(z.Map(a.String,ch[1].$1.get_View()))}:ch[1].$==12?{$:1,$0:y.TextView(z.Map(function(cj){return cj.get_Input();},ch[1].$1.get_View()))}:ch[1].$==13?{$:1,$0:y.TextView(z.Map(a.String,ch[1].$1.get_View()))}:(b0.warn("Content hole filled with attribute data",cg),null):null;}b$=[];ca=[];cb=[];cc=[];cd=new S.New$5();ce=I.Get(b4);try{while(ce.MoveNext()){cf=ce.Current();cd.set_Item(cf.$0,cf);}}finally{if(typeof ce=="object"&&"Dispose"in ce)ce.Dispose();}b5=_4.ChildrenArray(b3);O.foreachNotPreserved(b3,"[ws-hole]",function(cg){var ch,ci,cj;cj=cg.getAttribute("ws-hole");cg.removeAttribute("ws-hole");while(cg.hasChildNodes())cg.removeChild(cg.lastChild);ch=b_(cj);if(ch!=null&&ch.$==1){ci=ch.$0;_5.LinkElement(cg,ci.docNode);b$.push(bb.New(bv.Empty(cg),ci.docNode,null,cg,Q.Int(),null));ca.push(ci.updates);}});O.foreachNotPreserved(b3,"[ws-replace]",function(cg){var ch,ci,cj,ck,cl,cm;ch=b_(cg.getAttribute("ws-replace"));if(ch!=null&&ch.$==1){ci=ch.$0;cj=cg.parentNode;ck=self.document.createTextNode("");cj.replaceChild(ck,cg);cl=_5.InsertBeforeDelim(ck,ci.docNode);cm=u.tryFindIndex(function(cn){return cg===cn;},b5);cm==null?void 0:u.set(b5,cm.$0,ci.docNode);b$.push(bb.New(bv.Empty(cj),ci.docNode,{$:1,$0:[cl,ck]},cj,Q.Int(),null));ca.push(ci.updates);}});O.foreachNotPreserved(b3,"[ws-attr]",function(cg){var ch,ci,cj;ch=cg.getAttribute("ws-attr");cg.removeAttribute("ws-attr");ci=(cj=null,[cd.TryGetValue(ch,{get:function(){return cj;},set:function(ck){cj=ck;}}),cj]);if(ci[0])ci[1].$==3?b9(cg,ci[1].$1):b0.warn("Attribute hole filled with non-attribute data",ch);});O.foreachNotPreserved(b3,"[ws-on]",function(cg){b9(cg,W.Concat(u.choose(function(ch){var ci,cj,ck;ci=bx.SplitChars(ch,[":"],1);cj=(ck=null,[cd.TryGetValue(u.get(ci,1),{get:function(){return ck;},set:function(cl){ck=cl;}}),ck]);return cj[0]?cj[1].$==4?{$:1,$0:bw.Handler(u.get(ci,0),cj[1].$1)}:cj[1].$==5?{$:1,$0:W.Handler(u.get(ci,0),cj[1].$1)}:(b0.warn("Event hole on"+u.get(ci,0)+" filled with non-event data",u.get(ci,1)),null):null;},bx.SplitChars(cg.getAttribute("ws-on"),[" "],1))));cg.removeAttribute("ws-on");});O.foreachNotPreserved(b3,"[ws-onafterrender]",function(cg){var ch,ci,cj;ch=cg.getAttribute("ws-onafterrender");ci=(cj=null,[cd.TryGetValue(ch,{get:function(){return cj;},set:function(ck){cj=ck;}}),cj]);if(ci[0])ci[1].$==6?(cg.removeAttribute("ws-onafterrender"),b9(cg,bw.OnAfterRender(ci[1].$1))):ci[1].$==7?(cg.removeAttribute("ws-onafterrender"),b9(cg,bw.OnAfterRender(ci[1].$1))):b0.warn("onafterrender hole filled with non-onafterrender data",ch);});O.foreachNotPreserved(b3,"[ws-var]",function(cg){var ch,ci,cj;ch=cg.getAttribute("ws-var");cg.removeAttribute("ws-var");ci=(cj=null,[cd.TryGetValue(ch,{get:function(){return cj;},set:function(ck){cj=ck;}}),cj]);if(ci[0])ci[1].$==8?b9(cg,bw.Value(ci[1].$1)):ci[1].$==9?b9(cg,bw.Checked(ci[1].$1)):ci[1].$==10?b9(cg,bw.IntValue(ci[1].$1)):ci[1].$==11?b9(cg,bw.IntValueUnchecked(ci[1].$1)):ci[1].$==12?b9(cg,bw.FloatValue(ci[1].$1)):ci[1].$==13?b9(cg,bw.FloatValueUnchecked(ci[1].$1)):b0.warn("Var hole filled with non-Var data",ch);});O.foreachNotPreserved(b3,"[ws-attr-holes]",function(cg){var ch,ci,cj,ck;ch=new a.RegExp(O.TextHoleRE(),"g");ci=bx.SplitChars(cg.getAttribute("ws-attr-holes"),[" "],1);cg.removeAttribute("ws-attr-holes");for(cj=0,ck=ci.length-1;cj<=ck;cj++)(function(){var cl,cm,cn,co,cp,cq,cr,cs,ct,cu,cv,cw,cx;cu=u.get(ci,cj);cv=cg.getAttribute(cu);cl=null;cm=0;cw=[];while(cl=ch.exec(cv),cl!==null){cx=bp.string(cv,{$:1,$0:cm},{$:1,$0:ch.lastIndex-u.get(cl,0).length-1});cm=ch.lastIndex;cw.push([cx,u.get(cl,1)]);}co=bp.string(cv,{$:1,$0:cm},null);ch.lastIndex=0;cp=u.foldBack(function(cy,cz){return(function(cA){var cB,cC;cB=cA[0];cC=cA[1];return function(cD){var cE,cF,cG,cH,cI;cE=cD[0];cF=cD[1];cG=(cH=(cI=null,[cd.TryGetValue(cC,{get:function(){return cI;},set:function(cJ){cI=cJ;}}),cI]),cH[0]?cH[1].$==1?{$:0,$0:cH[1].$1}:cH[1].$==2?{$:1,$0:cH[1].$1}:cH[1].$==8?{$:1,$0:cH[1].$1.get_View()}:cH[1].$==9?{$:1,$0:z.Map(a.String,cH[1].$1.get_View())}:cH[1].$==10?{$:1,$0:z.Map(function(cJ){return cJ.get_Input();},cH[1].$1.get_View())}:cH[1].$==11?{$:1,$0:z.Map(a.String,cH[1].$1.get_View())}:cH[1].$==12?{$:1,$0:z.Map(function(cJ){return cJ.get_Input();},cH[1].$1.get_View())}:cH[1].$==13?{$:1,$0:z.Map(a.String,cH[1].$1.get_View())}:(b0.warn("Attribute value hole filled with non-text data",cC),{$:0,$0:""}):{$:0,$0:""});return cG.$==1?[cB,new _2({$:1,$0:cE===""?cG.$0:z.Map(function(cJ){return cJ+cE;},cG.$0),$1:cF})]:[cB+cG.$0+cE,cF];};}(cy))(cz);},cw,[co,_2.Empty]);return b9(cg,cp[1].$==1?cp[1].$1.$==1?cp[1].$1.$1.$==1?cp[1].$1.$1.$1.$==0?(cq=cp[0],bw.Dynamic(cu,z.Map3(function(cy,cz,cA){return cq+cy+cz+cA;},cp[1].$0,cp[1].$1.$0,cp[1].$1.$1.$0))):(cr=cp[0],bw.Dynamic(cu,z.Map(function(cy){return cr+bx.concat("",cy);},z.Sequence(cp[1])))):(cs=cp[0],bw.Dynamic(cu,z.Map2(function(cy,cz){return cs+cy+cz;},cp[1].$0,cp[1].$1.$0))):cp[0]===""?bw.Dynamic(cu,cp[1].$0):(ct=cp[0],bw.Dynamic(cu,z.Map(function(cy){return ct+cy;},cp[1].$0))):W.Create(cu,cp[0]));}());});return[bY.DeleteEmptyFields({Els:b5,Dirty:true,Holes:b$,Attrs:cb,Render:(b6=cc.length==0?null:{$:1,$0:function(cg){u.iter(function(ch){ch(cg);},cc);}},b6?b6.$0:void 0),El:(b7=!w.Equals(b5,null)&&b5.length===1&&(u.get(b5,0)instanceof _8&&(u.get(b5,0)instanceof a.Element&&(b8=u.get(b5,0),true)))?{$:1,$0:b8}:null,b7?b7.$0:void 0)},["Render","El"]),M.TreeReduce(z.Const(),z.Map2Unit,ca)];};O.GlobalHoles=function(){bd.$cctor();return bd.GlobalHoles;};O.foreachNotPreserved=function(b3,b4,b5){_4.IterSelector(b3,b4,function(b6){if(b6.closest("[ws-preserve]")==null)b5(b6);});};O.PrepareSingleTemplate=function(b3,b4,b5){var b6;b6=O.FakeRootSingle(b5);return function(b7){O.PrepareTemplateStrict(b3,b4,b6,b7);};};O.TextHoleRE=function(){bd.$cctor();return bd.TextHoleRE;};Q.Int=function(){Q.set_counter(Q.counter()+1);return Q.counter();};Q.set_counter=function(b3){bi.$cctor();bi.counter=b3;};Q.counter=function(){bi.$cctor();return bi.counter;};R.New=function(b3,b4){return{k:b3,ct:b4};};z=f.View=bY.Class({},null,z);S=k.Dictionary=bY.Class({Clear:function(){this.data=[];this.count=0;},set_Item:function(b3,b4){this.set(b3,b4);},set:function(b3,b4){var b5,b6,b7,b8;b5=this;b6=this.hash(b3);b7=this.data[b6];if(b7==null){this.count=this.count+1;this.data[b6]=new a.Array({K:b3,V:b4});}else{b8=u.tryFindIndex(function(b9){return b5.equals.apply(null,[(h.KeyValue(b9))[0],b3]);},b7);b8==null?(this.count=this.count+1,b7.push({K:b3,V:b4})):b7[b8.$0]={K:b3,V:b4};}},TryGetValue:function(b3,b4){var b5,b6,b7;b5=this;b6=this.data[this.hash(b3)];return b6==null?false:(b7=u.tryPick(function(b8){var b9;b9=h.KeyValue(b8);return b5.equals.apply(null,[b9[0],b3])?{$:1,$0:b9[1]}:null;},b6),b7!=null&&b7.$==1&&(b4.set(b7.$0),true));},Remove:function(b3){return this.remove(b3);},ContainsKey:function(b3){var b4,b5;b4=this;b5=this.data[this.hash(b3)];return b5==null?false:u.exists(function(b6){return b4.equals.apply(null,[(h.KeyValue(b6))[0],b3]);},b5);},get_Keys:function(){return new bq.New(this);},get_Values:function(){return new bz.New(this);},remove:function(b3){var b4,b5,b6,b7;b4=this;b5=this.hash(b3);b6=this.data[b5];return b6==null?false:(b7=u.filter(function(b8){return!b4.equals.apply(null,[(h.KeyValue(b8))[0],b3]);},b6),u.length(b7)<b6.length&&(this.count=this.count-1,this.data[b5]=b7,true));},get_Item:function(b3){return this.get(b3);},get:function(b3){var b4,b5;b4=this;b5=this.data[this.hash(b3)];return b5==null?ba.notPresent():u.pick(function(b6){var b7;b7=h.KeyValue(b6);return b4.equals.apply(null,[b7[0],b3])?{$:1,$0:b7[1]}:null;},b5);},GetEnumerator:function(){return I.Get0(this);},GetEnumerator0:function(){return I.Get0(u.concat(U.GetFieldValues(this.data)));}},e,S);S.New$5=bY.Ctor(function(){S.New$6.call(this,[],w.Equals,w.Hash);},S);S.New$6=bY.Ctor(function(b3,b4,b5){var b6,b7;e.New.call(this);this.equals=b4;this.hash=b5;this.count=0;this.data=[];b6=I.Get(b3);try{while(b6.MoveNext()){b7=b6.Current();this.set(b7.K,b7.V);}}finally{if(typeof b6=="object"&&"Dispose"in b6)b6.Dispose();}},S);D.Obsolete=function(b3){var b4,b5,b6,b7,b8;b5=b3.s;if(b5==null||(b5!=null&&b5.$==2?(b4=b5.$1,false):b5!=null&&b5.$==3?(b4=b5.$1,false):true))void 0;else{b3.s=null;for(b6=0,b7=u.length(b4)-1;b6<=b7;b6++){b8=u.get(b4,b6);if(typeof b8=="object")(function(b9){D.Obsolete(b9);}(b8));else b8();}}};D.New=function(b3){return{s:b3};};o.Create=function(b3,b4){return o.CreateWithStorage(b3,_.InMemory(u.ofSeq(b4)));};o.CreateWithStorage=function(b3,b4){return new o.New(b3,b4);};T.New=function(b3,b4){return{c:b3,r:b4};};U.GetFieldValues=function(b3){var b4,b5;b4=[];for(var b6 in b3)b4.push(b3[b6]);return b4;};W=f.AttrProxy=bY.Class({},null,W);W.Concat=function(b3){var b4;b4=M.ofSeqNonCopying(b3);return M.TreeReduce(bv.EmptyAttr(),W.Append,b4);};W.Append=function(b3,b4){return bv.AppendTree(b3,b4);};W.Handler=function(b3,b4){return W.HandlerImpl(b3,b4);};W.Create=function(b3,b4){return bv.Static(function(b5){b5.setAttribute(b3,b4);});};W.HandlerImpl=function(b3,b4){return bv.Static(function(b5){b5.addEventListener(b3,function(b6){return(b4(b5))(b6);},false);});};X=f.CheckedInput=bY.Class({get_Input:function(){return this.$==1?this.$0:this.$==2?this.$0:this.$1;}},null,X);Y.TryParseInt32=function(b3,b4){return Y.TryParse(b3,-2147483648,2147483647,b4);};Z=k.HashSet=bY.Class({Add:function(b3){return this.add(b3);},Contains:function(b3){var b4;b4=this.data[this.hash(b3)];return b4==null?false:this.arrContains(b3,b4);},add:function(b3){var b4,b5;b4=this.hash(b3);b5=this.data[b4];return b5==null?(this.data[b4]=[b3],this.count=this.count+1,true):this.arrContains(b3,b5)?false:(b5.push(b3),this.count=this.count+1,true);},arrContains:function(b3,b4){var b5,b6,b7,b8;b5=true;b6=0;b8=b4.length;while(b5&&b6<b8)if(this.equals.apply(null,[b4[b6],b3]))b5=false;else b6=b6+1;return!b5;},ExceptWith:function(b3){var b4;b4=I.Get(b3);try{while(b4.MoveNext())this.Remove(b4.Current());}finally{if(typeof b4=="object"&&"Dispose"in b4)b4.Dispose();}},get_Count:function(){return this.count;},CopyTo:function(b3){var b4,b5,b6,b7;b4=0;b5=bH.concat(this.data);for(b6=0,b7=b5.length-1;b6<=b7;b6++)u.set(b3,b6,b5[b6]);},IntersectWith:function(b3){var b4,b5,b6,b7,b8;b4=new Z.New$4(b3,this.equals,this.hash);b5=bH.concat(this.data);for(b6=0,b7=b5.length-1;b6<=b7;b6++){b8=b5[b6];if(!b4.Contains(b8))this.Remove(b8);}},Remove:function(b3){var b4;b4=this.data[this.hash(b3)];return b4==null?false:this.arrRemove(b3,b4)&&(this.count=this.count-1,true);},arrRemove:function(b3,b4){var b5,b6,b7,b8;b5=true;b6=0;b8=b4.length;while(b5&&b6<b8)if(this.equals.apply(null,[b4[b6],b3])){b4.splice.apply(b4,[b6,1]);b5=false;}else b6=b6+1;return!b5;},GetEnumerator:function(){return I.Get(bH.concat(this.data));},GetEnumerator0:function(){return I.Get(bH.concat(this.data));}},e,Z);Z.New$3=bY.Ctor(function(){Z.New$4.call(this,[],w.Equals,w.Hash);},Z);Z.New$4=bY.Ctor(function(b3,b4,b5){var b6;e.New.call(this);this.equals=b4;this.hash=b5;this.data=[];this.count=0;b6=I.Get(b3);try{while(b6.MoveNext())this.add(b6.Current());}finally{if(typeof b6=="object"&&"Dispose"in b6)b6.Dispose();}},Z);Z.New$2=bY.Ctor(function(b3){Z.New$4.call(this,b3,w.Equals,w.Hash);},Z);u.choose=function(b3,b4){var b5,b6,b7,b8;b5=[];for(b6=0,b7=b4.length-1;b6<=b7;b6++){b8=b3(b4[b6]);if(b8==null);else b5.push(b8.$0);}return b5;};u.ofList=function(b3){var b4,b5;b5=[];b4=b3;while(!(b4.$==0)){b5.push(_1.head(b4));b4=_1.tail(b4);}return b5;};u.tryFindIndex=function(b3,b4){var b5,b6;b5=null;b6=0;while(b6<b4.length&&b5==null){b3(b4[b6])?b5={$:1,$0:b6}:void 0;b6=b6+1;}return b5;};u.ofSeq=function(b3){var b4,b5;if(b3 instanceof a.Array)return b3.slice();else if(b3 instanceof _2)return u.ofList(b3);else{b4=[];b5=I.Get(b3);try{while(b5.MoveNext())b4.push(b5.Current());return b4;}finally{if(typeof b5=="object"&&"Dispose"in b5)b5.Dispose();}}};u.tryPick=function(b3,b4){var b5,b6,b7;b5=null;b6=0;while(b6<b4.length&&b5==null){b7=b3(b4[b6]);if(b7!=null&&b7.$==1)b5=b7;b6=b6+1;}return b5;};u.exists=function(b3,b4){var b5,b6,b7,b8;b5=false;b6=0;b8=u.length(b4);while(!b5&&b6<b8)if(b3(b4[b6]))b5=true;else b6=b6+1;return b5;};u.concat=function(b3){return a.Array.prototype.concat.apply([],u.ofSeq(b3));};u.foldBack=function(b3,b4,b5){var b6,b7,b8,b9,b_;b6=b5;b8=b4.length;for(b9=1,b_=b8;b9<=b_;b9++)b6=b3(b4[b8-b9],b6);return b6;};u.iter=function(b3,b4){var b5,b6;for(b5=0,b6=b4.length-1;b5<=b6;b5++)b3(b4[b5]);};u.map=function(b3,b4){var b5,b6,b7;b5=new a.Array(b4.length);for(b6=0,b7=b4.length-1;b6<=b7;b6++)b5[b6]=b3(b4[b6]);return b5;};u.filter=function(b3,b4){var b5,b6,b7;b5=[];for(b6=0,b7=b4.length-1;b6<=b7;b6++)if(b3(b4[b6]))b5.push(b4[b6]);return b5;};u.pick=function(b3,b4){var b5;b5=u.tryPick(b3,b4);return b5==null?h.FailWith("KeyNotFoundException"):b5.$0;};u.forall=function(b3,b4){var b5,b6,b7,b8;b5=true;b6=0;b8=u.length(b4);while(b5&&b6<b8)if(b3(b4[b6]))b6=b6+1;else b5=false;return b5;};u.create=function(b3,b4){var b5,b6,b7;b5=new a.Array(b3);for(b6=0,b7=b3-1;b6<=b7;b6++)b5[b6]=b4;return b5;};u.init=function(b3,b4){var b5,b6,b7;if(b3<0)h.FailWith("Negative size given.");else null;b5=new a.Array(b3);for(b6=0,b7=b3-1;b6<=b7;b6++)b5[b6]=b4(b6);return b5;};_0.$cctor=function(){_0.$cctor=a.ignore;_0.initialized=new S.New$5();};_0=s.TemplateInitializer=bY.Class({},e,_0);_0.GetOrAddHoleFor=function(b3,b4,b5){var b6,b7,b8,b9;_0.$cctor();b6=_0.GetHolesFor(b3);b7=(b8=null,[b6.TryGetValue(b4,{get:function(){return b8;},set:function(b_){b8=b_;}}),b8]);return b7[0]?b7[1]:(b9=b5(),(b6.set_Item(b4,b9),b9));};_0.GetHolesFor=function(b3){var b4,b5,b6;_0.$cctor();b4=(b5=null,[_0.initialized.TryGetValue(b3,{get:function(){return b5;},set:function(b7){b5=b7;}}),b5]);return b4[0]?b4[1]:(b6=new S.New$5(),(_0.initialized.set_Item(b3,b6),b6));};_2=_1.T=bY.Class({GetEnumerator:function(){return new J.New(this,null,function(b3){var b4;b4=b3.s;return b4.$==0?false:(b3.c=b4.$0,b3.s=b4.$1,true);},void 0);},GetEnumerator0:function(){return I.Get(this);}},null,_2);_2.Empty=new _2({$:0});_3.StartTo=function(b3,b4){G.StartWithContinuations(b3,b4,function(b5){_3.OnError(b5);},a.ignore,null);};_3.OnError=function(b3){return b0.log("WebSharper UI: Uncaught asynchronous exception",b3);};_4.ParseHTMLIntoFakeRoot=function(b3){var b4,b5,b6,b7,b8;function b9(b_,b$){var ca;while(true)if(b$===0)return b_;else{ca=b$;b_=b_.lastChild;b$=ca-1;}}b4=self.document.createElement("div");return!_4.rhtml().test(b3)?(b4.appendChild(self.document.createTextNode(b3)),b4):(b5=(b6=_4.rtagName().exec(b3),w.Equals(b6,null)?"":u.get(b6,1).toLowerCase()),(b7=(b8=(_4.wrapMap())[b5],b8?b8:_4.defaultWrap()),(b4.innerHTML=b7[1]+b3.replace(_4.rxhtmlTag(),"<$1></$2>")+b7[2],b9(b4,b7[0]))));};_4.ChildrenArray=function(b3){var b4,b5,b6;b4=[];for(b5=0,b6=b3.childNodes.length-1;b5<=b6;b5++)b4.push(b3.childNodes[b5]);return b4;};_4.rhtml=function(){bK.$cctor();return bK.rhtml;};_4.wrapMap=function(){bK.$cctor();return bK.wrapMap;};_4.defaultWrap=function(){bK.$cctor();return bK.defaultWrap;};_4.rxhtmlTag=function(){bK.$cctor();return bK.rxhtmlTag;};_4.rtagName=function(){bK.$cctor();return bK.rtagName;};_4.IterSelector=function(b3,b4,b5){var b6,b7,b8;b6=b3.querySelectorAll(b4);for(b7=0,b8=b6.length-1;b7<=b8;b7++)b5(b6[b7]);};_4.InsertAt=function(b3,b4,b5){var b6;if(!(b5.parentNode===b3&&b4===(b6=b5.nextSibling,w.Equals(b6,null)?null:b6)))b3.insertBefore(b5,b4);};_4.RemoveNode=function(b3,b4){if(b4.parentNode===b3)b3.removeChild(b4);};_5.CreateEmbedNode=function(){return{Current:null,Dirty:false};};_5.UpdateEmbedNode=function(b3,b4){b3.Current=b4;b3.Dirty=true;};_5.LinkElement=function(b3,b4){_5.InsertDoc(b3,b4,null);};_5.InsertDoc=function(b3,b4,b5){var b6,b7,b8;while(true)if(b4!=null&&b4.$==1)return _5.InsertNode(b3,b4.$0.El,b5);else if(b4!=null&&b4.$==2){b6=b4.$0;b6.Dirty=false;b4=b6.Current;}else if(b4==null)return b5;else if(b4!=null&&b4.$==4)return _5.InsertNode(b3,b4.$0.Text,b5);else if(b4!=null&&b4.$==5)return _5.InsertNode(b3,b4.$0,b5);else if(b4!=null&&b4.$==6)return u.foldBack(function(b9,b_){return(((bY.Curried3(function(b$,ca,cb){return ca==null||ca.constructor===V?_5.InsertDoc(b$,ca,cb):_5.InsertNode(b$,ca,cb);}))(b3))(b9))(b_);},b4.$0.Els,b5);else{b7=b4.$1;b8=b4.$0;b4=b8;b5=_5.InsertDoc(b3,b7,b5);}};_5.CreateRunState=function(b3,b4){return bC.New(bD.get_Empty(),_5.CreateElemNode(b3,bv.EmptyAttr(),b4));};_5.PerformAnimatedUpdate=function(b3,b4,b5){var b6;return br.get_UseAnimations()?(b6=null,G.Delay(function(){var b7,b8,b9;b7=bD.FindAll(b5);b8=_5.ComputeChangeAnim(b4,b7);b9=_5.ComputeEnterAnim(b4,b7);return G.Bind(br.Play(br.Append(b8,_5.ComputeExitAnim(b4,b7))),function(){return G.Bind(_5.SyncElemNodesNextFrame(b3,b4),function(){return G.Bind(br.Play(b9),function(){b4.PreviousNodes=b7;return G.Return(null);});});});})):_5.SyncElemNodesNextFrame(b3,b4);};_5.PerformSyncUpdate=function(b3,b4,b5){var b6;b6=bD.FindAll(b5);_5.SyncElemNode(b3,b4.Top);b4.PreviousNodes=b6;};_5.InsertBeforeDelim=function(b3,b4){var b5,b6;b5=b3.parentNode;b6=self.document.createTextNode("");b5.insertBefore(b6,b3);_5.LinkPrevElement(b3,b4);return b6;};_5.CreateElemNode=function(b3,b4,b5){var b6;_5.LinkElement(b3,b5);b6=bv.Insert(b3,b4);return bb.New(b6,b5,null,b3,Q.Int(),bY.GetOptional(b6.OnAfterRender));};_5.InsertNode=function(b3,b4,b5){_4.InsertAt(b3,b5,b4);return b4;};_5.SyncElemNodesNextFrame=function(b3,b4){function b5(b6){a.requestAnimationFrame(function(){_5.SyncElemNode(b3,b4.Top);b6();});}return bs.BatchUpdatesEnabled()?G.FromContinuations(function(b6,b7,b8){return b5.apply(null,[b6,b7,b8]);}):(_5.SyncElemNode(b3,b4.Top),G.Return(null));};_5.ComputeExitAnim=function(b3,b4){return br.Concat(u.map(function(b5){return bv.GetExitAnim(b5.Attr);},bD.ToArray(bD.Except(b4,bD.Filter(function(b5){return bv.HasExitAnim(b5.Attr);},b3.PreviousNodes)))));};_5.ComputeEnterAnim=function(b3,b4){return br.Concat(u.map(function(b5){return bv.GetEnterAnim(b5.Attr);},bD.ToArray(bD.Except(b3.PreviousNodes,bD.Filter(function(b5){return bv.HasEnterAnim(b5.Attr);},b4)))));};_5.ComputeChangeAnim=function(b3,b4){var b5;function b6(b7){return bv.HasChangeAnim(b7.Attr);}b5=function(b7){return bD.Filter(b6,b7);};return br.Concat(u.map(function(b7){return bv.GetChangeAnim(b7.Attr);},bD.ToArray(bD.Intersect(b5(b3.PreviousNodes),b5(b4)))));};_5.SyncElemNode=function(b3,b4){!b3?_5.SyncElement(b4):void 0;_5.Sync(b4.Children);_5.AfterRender(b4);};_5.CreateTextNode=function(){return{Text:self.document.createTextNode(""),Dirty:false,Value:""};};_5.UpdateTextNode=function(b3,b4){b3.Value=b4;b3.Dirty=true;};_5.LinkPrevElement=function(b3,b4){_5.InsertDoc(b3.parentNode,b4,b3);};_5.SyncElement=function(b3){function b4(b5){function b6(b7){var b8,b9,b_,b$;while(true){if(b7!=null&&b7.$==0){b9=b7.$1;b_=b7.$0;if(b6(b_))return true;else b7=b9;}else if(b7!=null&&b7.$==2){b$=b7.$0;if(b$.Dirty)return true;else b7=b$.Current;}else return b7!=null&&b7.$==6&&(b8=b7.$0,b8.Dirty||u.exists(b4,b8.Holes));}}return b6(b5.Children);}bv.Sync(b3.El,b3.Attr);if(b4(b3))_5.DoSyncElement(b3);};_5.Sync=function(b3){var b4,b5,b6,b7,b8;while(true){if(b3!=null&&b3.$==1)return _5.SyncElemNode(false,b3.$0);else if(b3!=null&&b3.$==2){b6=b3.$0;b3=b6.Current;}else if(b3==null)return null;else if(b3!=null&&b3.$==5)return null;else if(b3!=null&&b3.$==4){b4=b3.$0;return b4.Dirty?(b4.Text.nodeValue=b4.Value,b4.Dirty=false):null;}else if(b3!=null&&b3.$==6){b5=b3.$0;u.iter(function(b9){return function(b_){_5.SyncElemNode(b9,b_);};}(false),b5.Holes);u.iter(function(b9){bv.Sync(b9[0],b9[1]);},b5.Attrs);return _5.AfterRender(b5);}else{b7=b3.$1;b8=b3.$0;_5.Sync(b8);b3=b7;}}};_5.AfterRender=function(b3){var b4;b4=bY.GetOptional(b3.Render);if(b4!=null&&b4.$==1){b4.$0(b3.El);bY.SetOptional(b3,"Render",null);}};_5.DoSyncElement=function(b3){var b4,b5,b6;function b7(b8,b9){var b_,b$,ca,cb;while(true){if(b8!=null&&b8.$==1)return b8.$0.El;else if(b8!=null&&b8.$==2){b$=b8.$0;if(b$.Dirty){b$.Dirty=false;return _5.InsertDoc(b4,b$.Current,b9);}else b8=b$.Current;}else if(b8==null)return b9;else if(b8!=null&&b8.$==4)return b8.$0.Text;else if(b8!=null&&b8.$==5)return b8.$0;else if(b8!=null&&b8.$==6){b_=b8.$0;b_.Dirty?b_.Dirty=false:void 0;return u.foldBack(function(cc,cd){return cc==null||cc.constructor===V?b7(cc,cd):cc;},b_.Els,b9);}else{ca=b8.$1;cb=b8.$0;b8=cb;b9=b7(ca,b9);}}}b4=b3.El;bS.Iter((b5=b3.El,function(b8){_4.RemoveNode(b5,b8);}),bS.Except(bS.DocChildren(b3),bS.Children(b3.El,bY.GetOptional(b3.Delimiters))));b7(b3.Children,(b6=bY.GetOptional(b3.Delimiters),b6!=null&&b6.$==1?b6.$0[1]:null));};_6.Parse=function(b3){var b4;b4=_6.TryParse(b3);return b4!=null&&b4.$==1?b4.$0:h.FailWith("Failed to parse date string.");};_6.TryParse=function(b3){var b4;b4=b2.parse(b3);return a.isNaN(b4)?null:{$:1,$0:b4};};_9=G.Scheduler=bY.Class({Fork:function(b3){var b4;b4=this;this.robin.push(b3);if(this.idle){this.idle=false;a.setTimeout(function(){b4.tick();},0);}},tick:function(){var b3,b4,b5;b4=this;b5=b2.now();b3=true;while(b3)if(this.robin.length===0){this.idle=true;b3=false;}else{(this.robin.shift())();b2.now()-b5>40?(a.setTimeout(function(){b4.tick();},0),b3=false):void 0;}}},e,_9);_9.New=bY.Ctor(function(){e.New.call(this);this.idle=true;this.robin=[];},_9);_.InMemory=function(b3){return new bj.New(b3);};$.$cctor=function(){$.$cctor=a.ignore;$.noneCT=T.New(false,[]);$.scheduler=new _9.New();$.defCTS=[new bk.New()];$.Zero=G.Return();$.GetCT=function(b3){b3.k({$:0,$0:b3.ct});};};ba.notPresent=function(){return h.FailWith("The given key was not present in the dictionary.");};bb=f.DocElemNode=bY.Class({Equals:function(b3){return this.ElKey===b3.ElKey;},GetHashCode:function(){return this.ElKey;}},null,bb);bb.New=function(b3,b4,b5,b6,b7,b8){var b9;return new bb((b9={Attr:b3,Children:b4,El:b6,ElKey:b7},(bY.SetOptional(b9,"Delimiters",b5),bY.SetOptional(b9,"Render",b8),b9)));};_1.head=function(b3){return b3.$==1?b3.$0:_1.listEmpty();};_1.tail=function(b3){return b3.$==1?b3.$1:_1.listEmpty();};_1.ofArray=function(b3){var b4,b5,b6;b4=_2.Empty;for(b5=u.length(b3)-1,b6=0;b5>=b6;b5--)b4=new _2({$:1,$0:u.get(b3,b5),$1:b4});return b4;};_1.listEmpty=function(){return h.FailWith("The input list was empty.");};bd.$cctor=function(){bd.$cctor=a.ignore;bd.LoadedTemplates=new S.New$5();bd.LocalTemplatesLoaded=false;bd.GlobalHoles=new S.New$5();bd.TextHoleRE="\\${([^}]+)}";bd.RenderedFullDocTemplate=null;};bg=d.OperationCanceledException=bY.Class({},bf,bg);bg.New=bY.Ctor(function(b3){bg.New$1.call(this,"The operation was canceled.",null,b3);},bg);bg.New$1=bY.Ctor(function(b3,b4,b5){this.message=b3;this.inner=b4;V.setPrototypeOf(this,bg.prototype);this.ct=b5;},bg);i.AjaxProvider=function(){bu.$cctor();return bu.AjaxProvider;};i.makePayload=function(b3){return bZ.stringify(b3);};i.makeHeaders=function(b3){return{"content-type":"application/json","x-websharper-rpc":b3};};i.EndPoint=function(){bu.$cctor();return bu.EndPoint;};i.ajax=function(b3,b4,b5,b6,b7,b8,b9){var b_,b$,ca;b_=new a.XMLHttpRequest();b$=a.document.cookie.replace(new a.RegExp("(?:(?:^|.*;)\\s*csrftoken\\s*\\=\\s*([^;]*).*$)|^.*$"),"$1");b_.open("POST",b4,b3);if(b3==true)b_.withCredentials=true;for(var cc in b5)b_.setRequestHeader(cc,b5[cc]);if(b$)b_.setRequestHeader("x-csrftoken",b$);function cb(){var cd;if(b_.status==200)b7(b_.responseText);else if(b9&&b_.status==403&&b_.responseText=="CSRF")b9();else{cd="Response status is not 200: ";b8(new bf(cd+b_.status));}}if("onload"in b_)b_.onload=b_.onerror=b_.onabort=cb;else b_.onreadystatechange=function(){if(b_.readyState==4)cb();};b_.send(b6);};bh.Activate=function(b3){var b4,b6,b7,b8,b9,b_,b$;function b5(ca){var cb,cc,cd,ce,cf;if(w.Equals(ca,null))return ca;else if(typeof ca=="object"){if(ca instanceof a.Array)return bh.shallowMap(b5,ca);else{cb=bh.shallowMap(b5,ca.$V);cc=ca.$T;if(cc===void 0)return cb;else{cd=u.get(b6,cc);if(cd===1)return _1.ofArray(cb);else if(cd===2)return self.WebSharper.Decimal.CreateDecimalBits(cb);else{ce=new(u.get(b6,cc))();for(var cg in cb)if(function(ch){ce[ch]=cb[ch];return false;}(cg))break;return ce;}}}}else return ca;}b6=b3?b3.$TYPES:void 0;if(b6===void 0)b4=b3;else{for(b7=0,b8=u.length(b6)-1;b7<=b8;b7++){b$=u.get(b6,b7);switch(!w.Equals(b$,null)&&b$.length===3?u.get(b$,0)==="WebSharper"?u.get(b$,1)==="List"?u.get(b$,2)==="T"?0:(b_=b$,2):(b_=b$,2):(b_=b$,2):!w.Equals(b$,null)&&b$.length===2?u.get(b$,0)==="WebSharper"?u.get(b$,1)==="Decimal"?1:(b_=b$,2):(b_=b$,2):(b_=b$,2)){case 0:b9=1;break;case 1:b9=2;break;case 2:b9=bh.lookup(b_);break;}u.set(b6,b7,b9);}b4=b3.$DATA;}return b5(b4);};bh.shallowMap=function(b3,b4){var b5,b6;if(b4 instanceof a.Array)return u.map(b3,b4);else if(typeof b4=="object"){b5={};for(var b7 in b4)if(function(b8){b5[b8]=b3(b4[b8]);return false;}(b7))break;return b5;}else return b4;};bh.lookup=function(b3){var b4,b5,b6,b7,b8;b6=u.length(b3);b4=self;b5=0;while(b5<b6){b7=u.get(b3,b5);b8=b4[b7];if(!w.Equals(typeof b8,void 0)){b4=b8;b5=b5+1;}else h.FailWith("Invalid server reply. Failed to find type: "+b7);}return b4;};bi.$cctor=function(){bi.$cctor=a.ignore;bi.counter=0;};bj=_.ArrayStorage=bY.Class({SSet:function(b3){return u.ofSeq(b3);},SSetAt:function(b3,b4,b5){u.set(b5,b3,b4);return b5;},SAppend:function(b3,b4){b4.push(b3);return b4;},SInit:function(){return this.init;}},e,bj);bj.New=bY.Ctor(function(b3){e.New.call(this);this.init=b3;},bj);bk=d.CancellationTokenSource=bY.Class({},e,bk);bk.New=bY.Ctor(function(){e.New.call(this);this.c=false;this.pending=null;this.r=[];this.init=1;},bk);bl=f.Elt=bY.Class({},y,bl);bl.TreeNode=function(b3,b4){var b5,b6;function b7(b8){return b8[1];}b5=by.Create(b4);return new bl.New$1({$:6,$0:b3},z.Map2Unit((b6=u.map(function(b8){return bv.Updates(b7(b8));},b3.Attrs),M.TreeReduce(z.Const(),z.Map2Unit,b6)),b5.v),u.get(b3.Els,0),b5);};bl.New=function(b3,b4,b5){var b6,b7;b6=_5.CreateElemNode(b3,b4,b5.docNode);b7=by.Create(b5.updates);return new bl.New$1({$:1,$0:b6},z.Map2Unit(bv.Updates(b6.Attr),b7.v),b3,b7);};bl.New$1=bY.Ctor(function(b3,b4,b5,b6){y.New.call(this,b3,b4);this.docNode$1=b3;this.updates$1=b4;this.elt=b5;this.rvUpdates=b6;},bl);bn.New=function(b3,b4,b5,b6){var b7;b7={DynElem:b3,DynFlags:b4,DynNodes:b5};bY.SetOptional(b7,"OnAfterRender",b6);return b7;};bo.convertTextNode=function(b3){var b4,b5,b6,b7,b8,b9;b4=null;b5=0;b7=b3.textContent;b8=new a.RegExp(O.TextHoleRE(),"g");while(b4=b8.exec(b7),b4!==null){b3.parentNode.insertBefore(self.document.createTextNode(bp.string(b7,{$:1,$0:b5},{$:1,$0:b8.lastIndex-u.get(b4,0).length-1})),b3);b5=b8.lastIndex;b9=self.document.createElement("span");b9.setAttribute("ws-replace",u.get(b4,1).toLowerCase());b3.parentNode.insertBefore(b9,b3);}b8.lastIndex=0;b3.textContent=bp.string(b7,{$:1,$0:b5},null);};bo.failNotLoaded=function(b3){b0.warn("Instantiating non-loaded template",b3);};bo.fillTextHole=function(b3,b4,b5){var b6;b6=b3.querySelector("[ws-replace]");return w.Equals(b6,null)?(b0.warn("Filling non-existent text hole",b5),null):(b6.parentNode.replaceChild(self.document.createTextNode(b4),b6),{$:1,$0:b6.getAttribute("ws-replace")});};bo.removeHolesExcept=function(b3,b4){function b5(b6){O.foreachNotPreserved(b3,"["+b6+"]",function(b7){if(!b4.Contains(b7.getAttribute(b6)))b7.removeAttribute(b6);});}b5("ws-attr");b5("ws-onafterrender");b5("ws-var");O.foreachNotPreserved(b3,"[ws-hole]",function(b6){if(!b4.Contains(b6.getAttribute("ws-hole"))){b6.removeAttribute("ws-hole");while(b6.hasChildNodes())b6.removeChild(b6.lastChild);}});O.foreachNotPreserved(b3,"[ws-replace]",function(b6){if(!b4.Contains(b6.getAttribute("ws-replace")))b6.parentNode.removeChild(b6);});O.foreachNotPreserved(b3,"[ws-on]",function(b6){b6.setAttribute("ws-on",bx.concat(" ",u.filter(function(b7){return b4.Contains(u.get(bx.SplitChars(b7,[":"],1),1));},bx.SplitChars(b6.getAttribute("ws-on"),[" "],1))));});O.foreachNotPreserved(b3,"[ws-attr-holes]",function(b6){var b7,b8,b9,b_,b$;b7=bx.SplitChars(b6.getAttribute("ws-attr-holes"),[" "],1);for(b8=0,b9=b7.length-1;b8<=b9;b8++){b_=u.get(b7,b8);b6.setAttribute(b_,(b$=new a.RegExp(O.TextHoleRE(),"g"),b6.getAttribute(b_).replace(b$,function(ca,cb){return b4.Contains(cb)?ca:"";})));}});};bo.fillInstanceAttrs=function(b3,b4){var b5,b6,b7,b8,b9;bo.convertAttrs(b4);b5=b4.nodeName.toLowerCase();b6=b3.querySelector("[ws-attr="+b5+"]");if(w.Equals(b6,null))b0.warn("Filling non-existent attr hole",b5);else{b6.removeAttribute("ws-attr");for(b7=0,b8=b4.attributes.length-1;b7<=b8;b7++){b9=b4.attributes.item(b7);if(b9.name==="class"&&b6.hasAttribute("class"))b6.setAttribute("class",b6.getAttribute("class")+" "+b9.nodeValue);else b6.setAttribute(b9.name,b9.nodeValue);}}};bo.mapHoles=function(b3,b4){function b5(b6){O.foreachNotPreserved(b3,"["+b6+"]",function(b7){var b8,b9;b8=(b9=null,[b4.TryGetValue(b7.getAttribute(b6).toLowerCase(),{get:function(){return b9;},set:function(b_){b9=b_;}}),b9]);if(b8[0])b7.setAttribute(b6,b8[1]);});}b5("ws-hole");b5("ws-replace");b5("ws-attr");b5("ws-onafterrender");b5("ws-var");O.foreachNotPreserved(b3,"[ws-on]",function(b6){b6.setAttribute("ws-on",bx.concat(" ",u.map(function(b7){var b8,b9,b_;b8=bx.SplitChars(b7,[":"],1);b9=(b_=null,[b4.TryGetValue(u.get(b8,1),{get:function(){return b_;},set:function(b$){b_=b$;}}),b_]);return b9[0]?u.get(b8,0)+":"+b9[1]:b7;},bx.SplitChars(b6.getAttribute("ws-on"),[" "],1))));});O.foreachNotPreserved(b3,"[ws-attr-holes]",function(b6){var b7,b8,b9;b7=bx.SplitChars(b6.getAttribute("ws-attr-holes"),[" "],1);for(b8=0,b9=b7.length-1;b8<=b9;b8++)(function(){var b_;function b$(ca,cb){var cc;cc=h.KeyValue(cb);return ca.replace(new a.RegExp("\\${"+cc[0]+"}","ig"),"${"+cc[1]+"}");}b_=u.get(b7,b8);return b6.setAttribute(b_,(((bY.Curried3(p.fold))(b$))(b6.getAttribute(b_)))(b4));}());});};bo.fill=function(b3,b4,b5){while(true)if(b3.hasChildNodes())b5=b4.insertBefore(b3.lastChild,b5);else return null;};bo.convertAttrs=function(b3){var b5,b6,b7,b8,b9,b_,b$,ca;function b4(cb){var cc;cc=b3.getAttribute(cb);if(cc===null);else b3.setAttribute(cb,cc.toLowerCase());}b5=b3.attributes;b6=[];b7=[];b8=[];for(b9=0,b_=b5.length-1;b9<=b_;b9++){b$=b5.item(b9);if(bx.StartsWith(b$.nodeName,"ws-on")&&b$.nodeName!=="ws-onafterrender"&&b$.nodeName!=="ws-on"){b6.push(b$.nodeName);b7.push(bp.string(b$.nodeName,{$:1,$0:"ws-on".length},null)+":"+b$.nodeValue.toLowerCase());}else!bx.StartsWith(b$.nodeName,"ws-")&&(new a.RegExp(O.TextHoleRE())).test(b$.nodeValue)?(b$.nodeValue=(ca=new a.RegExp(O.TextHoleRE(),"g"),b$.nodeValue.replace(ca,function(cb,cc){return"${"+cc.toLowerCase()+"}";})),b8.push(b$.nodeName)):void 0;}if(!(b7.length==0))b3.setAttribute("ws-on",bx.concat(" ",b7));if(!(b8.length==0))b3.setAttribute("ws-attr-holes",bx.concat(" ",b8));b4("ws-hole");b4("ws-replace");b4("ws-attr");b4("ws-onafterrender");b4("ws-var");u.iter(function(cb){b3.removeAttribute(cb);},b6);};bp.string=function(b3,b4,b5){var b6,b7;return b4==null?b5!=null&&b5.$==1?(b6=b5.$0,b6<0?"":b3.slice(0,b6+1)):"":b5==null?b3.slice(b4.$0):(b7=b5.$0,b7<0?"":b3.slice(b4.$0,b7+1));};p.insufficient=function(){return h.FailWith("The input sequence has an insufficient number of elements.");};bq=k.KeyCollection=bY.Class({GetEnumerator$1:function(){return I.Get(p.map(function(b3){return b3.K;},this.d));},GetEnumerator:function(){return this.GetEnumerator$1();},GetEnumerator0:function(){return this.GetEnumerator$1();}},e,bq);bq.New=bY.Ctor(function(b3){e.New.call(this);this.d=b3;},bq);br.get_UseAnimations=function(){return bE.UseAnimations();};br.Play=function(b3){var b4;b4=null;return G.Delay(function(){return G.Bind(br.Run(a.ignore,bE.Actions(b3)),function(){bE.Finalize(b3);return G.Return(null);});});};br.Append=function(b3,b4){return{$:0,$0:bM.Append(b3.$0,b4.$0)};};br.Run=function(b3,b4){var b5;function b6(b7){function b8(b9){return function(b_){var b$;b$=b_-b9;b4.Compute(b$);b3();return b$<=b5?void a.requestAnimationFrame(function(ca){(b8(b9))(ca);}):b7();};}a.requestAnimationFrame(function(b9){(b8(b9))(b9);});}b5=b4.Duration;return b5===0?G.Zero():G.FromContinuations(function(b7,b8,b9){return b6.apply(null,[b7,b8,b9]);});};br.Concat=function(b3){return{$:0,$0:bM.Concat(p.map(bE.List,b3))};};br.get_Empty=function(){return{$:0,$0:bM.Empty()};};bs.BatchUpdatesEnabled=function(){bF.$cctor();return bF.BatchUpdatesEnabled;};bt.StartProcessor=function(b3){var b4;function b5(){var b6;b6=null;return G.Delay(function(){return G.Bind(b3,function(){var b7;b7=b4[0];return w.Equals(b7,1)?(b4[0]=0,G.Zero()):w.Equals(b7,2)?(b4[0]=1,b5()):G.Zero();});});}b4=[0];return function(){var b6;b6=b4[0];if(w.Equals(b6,0)){b4[0]=1;G.Start(b5(),null);}else w.Equals(b6,1)?b4[0]=2:void 0;};};bu.$cctor=function(){bu.$cctor=a.ignore;bu.EndPoint="?";bu.AjaxProvider=new bG.New();};bv.Insert=function(b3,b4){var b5,b6,b7;function b8(b9){var b_,b$;while(true)if(!(b9===null)){if(b9!=null&&b9.$==1)return b5.push(b9.$0);else if(b9!=null&&b9.$==2){b_=b9.$1;b$=b9.$0;b8(b$);b9=b_;}else return b9!=null&&b9.$==3?b9.$0(b3):b9!=null&&b9.$==4?b6.push(b9.$0):null;}else return null;}b5=[];b6=[];b8(b4);b7=b5.slice(0);return bn.New(b3,bv.Flags(b4),b7,b6.length===0?null:{$:1,$0:function(b9){p.iter(function(b_){b_(b9);},b6);}});};bv.Updates=function(b3){return M.MapTreeReduce(function(b4){return b4.NChanged();},z.Const(),z.Map2Unit,b3.DynNodes);};bv.Empty=function(b3){return bn.New(b3,0,[],null);};bv.AppendTree=function(b3,b4){var b5;return b3===null?b4:b4===null?b3:(b5=new W({$:2,$0:b3,$1:b4}),(bv.SetFlags(b5,bv.Flags(b3)|bv.Flags(b4)),b5));};bv.EmptyAttr=function(){bJ.$cctor();return bJ.EmptyAttr;};bv.Flags=function(b3){return b3!==null&&b3.hasOwnProperty("flags")?b3.flags:0;};bv.Static=function(b3){return new W({$:3,$0:b3});};bv.Dynamic=function(b3,b4){return new W({$:1,$0:new bN.New(b3,b4)});};bv.SetFlags=function(b3,b4){b3.flags=b4;};bv.HasExitAnim=function(b3){var b4;b4=2;return(b3.DynFlags&b4)===b4;};bv.GetExitAnim=function(b3){return bv.GetAnim(b3,function(b4,b5){return b4.NGetExitAnim(b5);});};bv.HasEnterAnim=function(b3){var b4;b4=1;return(b3.DynFlags&b4)===b4;};bv.GetEnterAnim=function(b3){return bv.GetAnim(b3,function(b4,b5){return b4.NGetEnterAnim(b5);});};bv.HasChangeAnim=function(b3){var b4;b4=4;return(b3.DynFlags&b4)===b4;};bv.GetChangeAnim=function(b3){return bv.GetAnim(b3,function(b4,b5){return b4.NGetChangeAnim(b5);});};bv.GetAnim=function(b3,b4){return br.Concat(u.map(function(b5){return b4(b5,b3.DynElem);},b3.DynNodes));};bv.Sync=function(b3,b4){u.iter(function(b5){b5.NSync(b3);},b4.DynNodes);};bw.Handler=function(b3,b4){return bv.Static(function(b5){b5.addEventListener(b3,function(b6){return(b4(b5))(b6);},false);});};bw.OnAfterRender=function(b3){return new W({$:4,$0:b3});};bw.Value=function(b3){return bw.ValueWith(bI.StringApply(),b3);};bw.Checked=function(b3){return bw.ValueWith(bI.BoolCheckedApply(),b3);};bw.IntValue=function(b3){return bw.ValueWith(bI.IntApplyChecked(),b3);};bw.IntValueUnchecked=function(b3){return bw.ValueWith(bI.IntApplyUnchecked(),b3);};bw.FloatValue=function(b3){return bw.ValueWith(bI.FloatApplyChecked(),b3);};bw.FloatValueUnchecked=function(b3){return bw.ValueWith(bI.FloatApplyUnchecked(),b3);};bw.Dynamic=function(b3,b4){return bv.Dynamic(b4,function(b5){return function(b6){return b5.setAttribute(b3,b6);};});};bw.ValueWith=function(b3,b4){var b5;b5=b3(b4);return W.Append(bv.Static(b5[0]),bw.DynamicCustom(b5[1],b5[2]));};bw.DynamicCustom=function(b3,b4){return bv.Dynamic(b4,b3);};bx.concat=function(b3,b4){return u.ofSeq(b4).join(b3);};bx.SplitChars=function(b3,b4,b5){return bx.Split(b3,new a.RegExp("["+bx.RegexEscape(b4.join(""))+"]"),b5);};bx.StartsWith=function(b3,b4){return b3.substring(0,b4.length)==b4;};bx.Split=function(b3,b4,b5){return b5===1?u.filter(function(b6){return b6!=="";},bx.SplitWith(b3,b4)):bx.SplitWith(b3,b4);};bx.RegexEscape=function(b3){return b3.replace(new a.RegExp("[-\\/\\\\^$*+?.()|[\\]{}]","g"),"\\$&");};bx.SplitWith=function(b3,b4){return b3.split(b4);};bx.forall=function(b3,b4){return p.forall(b3,bx.protect(b4));};bx.protect=function(b3){return b3===null?"":b3;};by=f.Updates=bY.Class({},null,by);by.Create=function(b3){var b4;b4=null;b4=by.New(b3,null,function(){var b5;b5=b4.s;return b5===null?(b5=D.Copy(b4.c()),b4.s=b5,D.WhenObsoleteRun(b5,function(){b4.s=null;}),b5):b5;});return b4;};by.New=function(b3,b4,b5){return new by({c:b3,s:b4,v:b5});};bz=k.ValueCollection=bY.Class({GetEnumerator$1:function(){return I.Get(p.map(function(b3){return b3.V;},this.d));},GetEnumerator:function(){return this.GetEnumerator$1();},GetEnumerator0:function(){return this.GetEnumerator$1();}},e,bz);bz.New=bY.Ctor(function(b3){e.New.call(this);this.d=b3;},bz);bA.Clear=function(b3){b3.splice(0,u.length(b3));};bC.New=function(b3,b4){return{PreviousNodes:b3,Top:b4};};bD.get_Empty=function(){return{$:0,$0:new Z.New$3()};};bD.FindAll=function(b3){var b4;function b5(b8,b9){var b_,b$,ca,cb,cc;while(true)switch(b8){case 0:if(b9!=null&&b9.$==0){b$=b9.$1;ca=b9.$0;b5(0,ca);b9=b$;}else if(b9!=null&&b9.$==1){cb=b9.$0;b9=cb;b8=1;}else if(b9!=null&&b9.$==2){cc=b9.$0;b9=cc.Current;}else return b9!=null&&b9.$==6?(b_=b9.$0.Holes,(function(cd){return function(ce){u.iter(cd,ce);};}(b7))(b_)):null;break;case 1:b4.push(b9);b9=b9.Children;b8=0;break;}}function b6(b8){return b5(0,b8);}function b7(b8){return b5(1,b8);}b4=[];b6(b3);return{$:0,$0:new Z.New$2(b4)};};bD.Filter=function(b3,b4){return{$:0,$0:bQ.Filter(b3,b4.$0)};};bD.Except=function(b3,b4){return{$:0,$0:bQ.Except(b3.$0,b4.$0)};};bD.ToArray=function(b3){return bQ.ToArray(b3.$0);};bD.Intersect=function(b3,b4){return{$:0,$0:bQ.Intersect(b3.$0,b4.$0)};};bE.UseAnimations=function(){bL.$cctor();return bL.UseAnimations;};bE.Actions=function(b3){return bE.ConcatActions(u.choose(function(b4){return b4.$==1?{$:1,$0:b4.$0}:null;},bM.ToArray(b3.$0)));};bE.Finalize=function(b3){u.iter(function(b4){if(b4.$==0)b4.$0();},bM.ToArray(b3.$0));};bE.ConcatActions=function(b3){var b4,b5,b6,b7;b4=M.ofSeqNonCopying(b3);b5=u.length(b4);return b5===0?bE.Const():b5===1?u.get(b4,0):(b6=p.max(p.map(function(b8){return b8.Duration;},b4)),(b7=u.map(function(b8){return bE.Prolong(b6,b8);},b4),bE.Def(b6,function(b8){u.iter(function(b9){b9.Compute(b8);},b7);})));};bE.List=function(b3){return b3.$0;};bE.Const=function(b3){return bE.Def(0,function(){return b3;});};bE.Def=function(b3,b4){return{Compute:b4,Duration:b3};};bE.Prolong=function(b3,b4){var b5,b6,b7;b5=b4.Compute;b6=b4.Duration;b7=bT.Create(function(){return b4.Compute(b4.Duration);});return{Compute:function(b8){return b8>=b6?b7.f():b5(b8);},Duration:b3};};bF.$cctor=function(){bF.$cctor=a.ignore;bF.BatchUpdatesEnabled=true;};bG=i.XhrProvider=bY.Class({Async:function(b3,b4,b5,b6,b7){i.ajax(true,b3,b4,b5,b6,b7,function(){i.ajax(true,b3,b4,b5,b6,b7,void 0);});}},e,bG);bG.New=bY.Ctor(function(){e.New.call(this);},bG);bH.concat=function(b3){var b4,b5;b4=[];for(var b6 in b3)b4.push.apply(b4,b3[b6]);return b4;};bI.StringApply=function(){bJ.$cctor();return bJ.StringApply;};bI.BoolCheckedApply=function(){bJ.$cctor();return bJ.BoolCheckedApply;};bI.IntApplyChecked=function(){bJ.$cctor();return bJ.IntApplyChecked;};bI.IntApplyUnchecked=function(){bJ.$cctor();return bJ.IntApplyUnchecked;};bI.FloatApplyChecked=function(){bJ.$cctor();return bJ.FloatApplyChecked;};bI.FloatApplyUnchecked=function(){bJ.$cctor();return bJ.FloatApplyUnchecked;};bI.ApplyValue=function(b3,b4,b5){var b6;function b7(b8,b9){return b9==null?null:b8(b9.$0);}b6=null;return[function(b8){function b9(){b5.UpdateMaybe(function(b_){var b$;b6=b3(b8);return b6!=null&&b6.$==1&&(!w.Equals(b6.$0,b_)&&(b$=[b6,b6.$0],true))?b$[0]:null;});}b8.addEventListener("change",b9);b8.addEventListener("input",b9);b8.addEventListener("keypress",b9);},function(b8){var b9;b9=b4(b8);return function(b_){return b7(b9,b_);};},z.Map(function(b8){var b9;return b6!=null&&b6.$==1&&(w.Equals(b6.$0,b8)&&(b9=b6.$0,true))?null:{$:1,$0:b8};},b5.get_View())];};bI.StringSet=function(){bJ.$cctor();return bJ.StringSet;};bI.StringGet=function(){bJ.$cctor();return bJ.StringGet;};bI.IntSetUnchecked=function(){bJ.$cctor();return bJ.IntSetUnchecked;};bI.IntGetUnchecked=function(){bJ.$cctor();return bJ.IntGetUnchecked;};bI.IntSetChecked=function(){bJ.$cctor();return bJ.IntSetChecked;};bI.IntGetChecked=function(){bJ.$cctor();return bJ.IntGetChecked;};bI.FloatSetUnchecked=function(){bJ.$cctor();return bJ.FloatSetUnchecked;};bI.FloatGetUnchecked=function(){bJ.$cctor();return bJ.FloatGetUnchecked;};bI.FloatSetChecked=function(){bJ.$cctor();return bJ.FloatSetChecked;};bI.FloatGetChecked=function(){bJ.$cctor();return bJ.FloatGetChecked;};bJ.$cctor=function(){var b3,b4,b5,b6,b7,b8,b9,b_,b$,ca;bJ.$cctor=a.ignore;bJ.EmptyAttr=null;bJ.BoolCheckedApply=function(cb){function cc(cd,ce){return ce!=null&&ce.$==1?void(cd.checked=ce.$0):null;}return[function(cd){cd.addEventListener("change",function(){return!w.Equals(cb.Get(),cd.checked)?cb.Set(cd.checked):null;});},function(cd){return function(ce){return cc(cd,ce);};},z.Map(function(cd){return{$:1,$0:cd};},cb.get_View())];};bJ.StringSet=function(cb){return function(cc){cb.value=cc;};};bJ.StringGet=function(cb){return{$:1,$0:cb.value};};bJ.StringApply=(b3=bI.StringGet(),(b4=bI.StringSet(),function(cb){return bI.ApplyValue(b3,b4,cb);}));bJ.IntSetUnchecked=function(cb){return function(cc){cb.value=a.String(cc);};};bJ.IntGetUnchecked=function(cb){var cc,cd;cc=cb.value;return bO.isBlank(cc)?{$:1,$0:0}:(cd=+cc,cd!==cd>>0?null:{$:1,$0:cd});};bJ.IntApplyUnchecked=(b5=bI.IntGetUnchecked(),(b6=bI.IntSetUnchecked(),function(cb){return bI.ApplyValue(b5,b6,cb);}));bJ.IntSetChecked=function(cb){return function(cc){var cd;cd=cc.get_Input();return cb.value!==cd?void(cb.value=cd):null;};};bJ.IntGetChecked=function(cb){var cc,cd,ce;cc=cb.value;return{$:1,$0:bO.isBlank(cc)?(cb.checkValidity?cb.checkValidity():true)?new X({$:2,$0:cc}):new X({$:1,$0:cc}):(cd=(ce=0,[Y.TryParseInt32(cc,{get:function(){return ce;},set:function(cf){ce=cf;}}),ce]),cd[0]?new X({$:0,$0:cd[1],$1:cc}):new X({$:1,$0:cc}))};};bJ.IntApplyChecked=(b7=bI.IntGetChecked(),(b8=bI.IntSetChecked(),function(cb){return bI.ApplyValue(b7,b8,cb);}));bJ.FloatSetUnchecked=function(cb){return function(cc){cb.value=a.String(cc);};};bJ.FloatGetUnchecked=function(cb){var cc,cd;cc=cb.value;return bO.isBlank(cc)?{$:1,$0:0}:(cd=+cc,a.isNaN(cd)?null:{$:1,$0:cd});};bJ.FloatApplyUnchecked=(b9=bI.FloatGetUnchecked(),(b_=bI.FloatSetUnchecked(),function(cb){return bI.ApplyValue(b9,b_,cb);}));bJ.FloatSetChecked=function(cb){return function(cc){var cd;cd=cc.get_Input();return cb.value!==cd?void(cb.value=cd):null;};};bJ.FloatGetChecked=function(cb){var cc,cd;cc=cb.value;return{$:1,$0:bO.isBlank(cc)?(cb.checkValidity?cb.checkValidity():true)?new X({$:2,$0:cc}):new X({$:1,$0:cc}):(cd=+cc,a.isNaN(cd)?new X({$:1,$0:cc}):new X({$:0,$0:cd,$1:cc}))};};bJ.FloatApplyChecked=(b$=bI.FloatGetChecked(),(ca=bI.FloatSetChecked(),function(cb){return bI.ApplyValue(b$,ca,cb);}));};bK.$cctor=function(){var b3;bK.$cctor=a.ignore;bK.rxhtmlTag=new a.RegExp("<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\\w:]+)[^>]*)\\/>","gi");bK.rtagName=new a.RegExp("<([\\w:]+)");bK.rhtml=new a.RegExp("<|&#?\\w+;");bK.wrapMap=(b3=[1,"<table>","</table>"],{option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:b3,tbody:b3,tfoot:b3,tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><colgroup>","</colgoup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"]});bK.defaultWrap=[0,"",""];};bL.$cctor=function(){bL.$cctor=a.ignore;bL.CubicInOut=bP.Custom(function(b3){var b4;b4=b3*b3;return 3*b4-2*(b4*b3);});bL.UseAnimations=true;};bM.Append=function(b3,b4){return b3.$==0?b4:b4.$==0?b3:{$:2,$0:b3,$1:b4};};bM.ToArray=function(b3){var b4;function b5(b6){var b7,b8;while(true)if(b6.$==1)return b4.push(b6.$0);else if(b6.$==2){b7=b6.$1;b8=b6.$0;b5(b8);b6=b7;}else return b6.$==3?u.iter(function(b9){b4.push(b9);},b6.$0):null;}b4=[];b5(b3);return b4.slice(0);};bM.Concat=function(b3){var b4;b4=M.ofSeqNonCopying(b3);return M.TreeReduce(bM.Empty(),bM.Append,b4);};bM.Empty=function(){bU.$cctor();return bU.Empty;};bN=f.DynamicAttrNode=bY.Class({NChanged:function(){return this.updates;},NGetExitAnim:function(b3){return br.get_Empty();},NGetEnterAnim:function(b3){return br.get_Empty();},NGetChangeAnim:function(b3){return br.get_Empty();},NSync:function(b3){if(this.dirty){(this.push(b3))(this.value);this.dirty=false;}}},e,bN);bN.New=bY.Ctor(function(b3,b4){var b5;b5=this;e.New.call(this);this.push=b4;this.value=void 0;this.dirty=false;this.updates=z.Map(function(b6){b5.value=b6;b5.dirty=true;},b3);},bN);bO.isBlank=function(b3){return bx.forall(bR.IsWhiteSpace,b3);};bP=f.Easing=bY.Class({},e,bP);bP.Custom=function(b3){return new bP.New(b3);};bP.New=bY.Ctor(function(b3){e.New.call(this);this.transformTime=b3;},bP);bQ.Filter=function(b3,b4){return new Z.New$2(u.filter(b3,bQ.ToArray(b4)));};bQ.Except=function(b3,b4){var b5;b5=new Z.New$2(bQ.ToArray(b4));b5.ExceptWith(bQ.ToArray(b3));return b5;};bQ.ToArray=function(b3){var b4;b4=u.create(b3.get_Count(),void 0);b3.CopyTo(b4);return b4;};bQ.Intersect=function(b3,b4){var b5;b5=new Z.New$2(bQ.ToArray(b3));b5.IntersectWith(bQ.ToArray(b4));return b5;};bR.IsWhiteSpace=function(b3){return b3.match(new a.RegExp("\\s"))!==null;};Y.TryParse=function(b3,b4,b5,b6){var b7,b8;b7=+b3;b8=b7===b7-b7%1&&b7>=b4&&b7<=b5;if(b8)b6.set(b7);return b8;};bS.Children=function(b3,b4){var b5,b6,b7;if(b4!=null&&b4.$==1){b7=[];b5=b4.$0[0].nextSibling;while(b5!==b4.$0[1]){b7.push(b5);b5=b5.nextSibling;}return{$:0,$0:b7};}else return{$:0,$0:u.init(b3.childNodes.length,(b6=b3.childNodes,function(b8){return b6[b8];}))};};bS.Except=function(b3,b4){var b5;b5=b3.$0;return{$:0,$0:u.filter(function(b6){return u.forall(function(b7){return!(b6===b7);},b5);},b4.$0)};};bS.Iter=function(b3,b4){u.iter(b3,b4.$0);};bS.DocChildren=function(b3){var b4;function b5(b6){var b7,b8,b9,b_;while(true){if(b6!=null&&b6.$==2){b8=b6.$0;b6=b8.Current;}else if(b6!=null&&b6.$==1)return b4.push(b6.$0.El);else if(b6==null)return null;else if(b6!=null&&b6.$==5)return b4.push(b6.$0);else if(b6!=null&&b6.$==4)return b4.push(b6.$0.Text);else if(b6!=null&&b6.$==6){b7=b6.$0.Els;return(function(b$){return function(ca){u.iter(b$,ca);};}(function(b$){if(b$==null||b$.constructor===V)b5(b$);else b4.push(b$);}))(b7);}else{b9=b6.$1;b_=b6.$0;b5(b_);b6=b9;}}}b4=[];b5(b3.Children);return{$:0,$0:M.ofSeqNonCopying(b4)};};bT.Create=function(b3){return bW.New(false,b3,bT.forceLazy);};bT.forceLazy=function(){var b3;b3=this.v();this.c=true;this.v=b3;this.f=bT.cachedLazy;return b3;};bT.cachedLazy=function(){return this.v;};bU.$cctor=function(){bU.$cctor=a.ignore;bU.Empty={$:0};};bW.New=function(b3,b4,b5){return{c:b3,v:b4,f:b5};};bY.OnLoad(function(){c.Main();});}(self));


if (typeof IntelliFactory !=='undefined') {
  IntelliFactory.Runtime.ScriptBasePath = '/Content/';
  IntelliFactory.Runtime.Start();
}
